(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{223:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAdhwAAHYcBj+XxZQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABhnSURBVHic7Z13eFVVtsB/+9ybm0oIqbRAAoTQe02oIghWREOTDgHEQQbrPJ3nRB1GHDs+fVIjEEVwsGABdCgDBBCxAtKL9BZaBEm5d78/TkIIpNx72r135v2+j+/jnpy99rrnrrPPPmuvtbbg3w4pGPN+IjbZBEgEmQDUAWIQRCGJAoIABxBa1OgykA9cRZCDJAfEaZBHQBxCyAMUKjuZN/QgCOmNb2UWwtsK6Gbi/Fo4lVSkSAXaI2QzoIpJveUC24BvETKbwoBs5g05blJfluB/BjAqM4hAew+coh9C9gUaelUfwW6Qy5GsIOjCWt58OM+r+niIfxhA2hIHEfl9gIEg7wHCva1SOVwEPkWwBK58xawJBd5WqDJ82wAmvJeEyzUWGAXEeVkbTzmFFIsRhbOYPWqHt5UpD980gPELuiB5EsQd+KqOnpGNS77I3OGf+9ok0ocurhSkv9cf5DNAK29rYxLfI13PMWfEMl8xBN8wgPSsfiCfB9p6WxVLkGxFyD8ze8RKb6viXQMYszAZG68Ad3hVD68h/onLNZW5I7Z7TQOv9Dp+Zggy5HngYcDuFR18hwIQrxHmyOC1gb9b3bn1BpA+/1aEMhNJPcv79m32IeUE5oxYbWWn1hnAqMwgAuwZwOOAYlm//oVEMBuuTGXWhCtWdGiNAYyb3wJhex9kU0v683+2gXOIFf4D8+/EcQuHIJSN///je0RzsH3L+KyRZndk3giQtsRGtasvI8UfTevjPwEpX6H2gSfIyHCZId4cA0hb4iAibyEw0BT5BhEXHgTAqUtXvaxJpXxMQeFQ3h1tuKLGG8CkJWEU5C0F+hgu22CWTuxGgE3h7rfWelsVN5BrCFL68+awS0ZKNXYOMO79OAry/oUf/PhjuzRgQJs63NWyNqNS6ntbHTcQPbkqVzNxQayRUo0zgImZCQjnBqCNYTJNIiEqjFcHlnidXx/UjjqRoRW08Bna4hQbmJiZYJRAYwxg9LwYXPYVQAND5JlIgE3hvXGphAcFXDtWNTiADyd0w2H3C/dEEk77P5mUWd0IYfq/8eSscOwBK5AkG6CP6bw6sC0p9WNuOt4hMYoXB/j84FVMfQrsKxmVGaFXkD4DSFvi4Kr8B34w7AMMbFeXP/Qs306n9GrEfW3qWKiRLloQYPuIyTMC9QjRbgAZGQoR+VlAbz0KWEVy9XBmj+hU4TlCwLujU2hSo6pFWulF9ORqtQ9IW2LTKkG7ARyv9wrINM3tLSQs0M5HD3Yv9dw34lwfoT8R+X/T2libAYzPGuovHj4hYN6ozh7d1cnVw5k/JgXhG+EybiAfZ9z8e7S09HzoGDe/BYhPAb+4RR6/rQl/7NXY43aNqlfl0tUCNh04a4JWhiNA9KblwEX8uNQjR5FnI8CozCCEkgWEeNTOS/RIjuNv97bW3P7F+9rQvaGfBCMLorAXfsj4mR7dmJ4ZQID9JaC5R228RK2IED5I74pd0T6O2xXB4vFdqRkRbKBmptKxKNLKbdw3gPT5twIPeaqRN1CEYMGYlGuLPXqICw9i4ZhUP5oP8ATpC7q7e7J7BjB+Zggo7+DtIFI3mdKrEbc0MsRRBsAtjaozuWcjw+SZjADxtruPAvcMQB1W/GHFhMY1qjLtXuPTCl4Y0Irk6r6akXYTTXCFuPWWVrkBjFvQGJisVyOreH1QO4IDNPtFyiXEYefVND9KWxBkMPa9upWd5sYIIF7FT175eibH0adJDdPk3968Fr0MfLSYTAiK6+XKTqrYANKz+iHoa5hKJiIEvGzBHTr9vtb+NCG8nwlZvSo6oQIDkALks0ZrZBY9k6vTpk6k6f20qxtFtyQ/8Q0AuORzFf25fANIf68/0N5ofcxitIVRPaNT/WI+XEwK4xZ2Le+PFY0Az5ihjRnYFMHtzWtZ1t8dzWuh+NFzAMGfy/tT2QagOn38JkW7YVw4kaEOy/qLDgukQaxZZYhMoQ/pWWWO5mUbgFQeNVUdg2kYZ/2P0ch/fAJFyKfKOnqzAUx4LwnBbabrYyDVQnQFxWjs07oRxyDuYfy7N01ebjYAlxyHn7h8i7ly1frCXC6n0/I+dSLANubGg6UNYPzMAKQcYZlKBnHy1GnL+zx/PsfyPnXjYsyNawSlDcAZ3BeBqa6u+MgQEqPDDJV58vQZQ+W5w/7DJwyVVy8mjPhIk8MsBNURIaUcQ6UNwCZMzeUTAmYN78TCManYdKzT38j+42c5e/6iYfIq48y5C+w5esoweYoQzBvZmcxRFoShucSgUn1f+9+ozCAkd5vZ9+SejejbtCapDWKY0su45VWnzcHKDd8aJq8ylq/fgtPApKrH+jShe8M4ejWqzoPdzS58KvuTtuTaDLbkWwTae2BiBc7k6uG8MKDEtTCtfyvjwq8dwXy+drMxstzgi39tBocxw3WzWhE8d0+La5//fl8bksz1MUQQ8Xu34g8lBuAU/czqMSjAxqJxXQhx2Esd++jB7lQxIvzaEcrSr9Zx4Iixz+WyOHTsJJ+syoZg/cYbFmhn8fiuBNpLlq9DA+0sfbB7qWtlOFJcW+ArMQAhTTOAt4d2oHUZCzXJ1cOZNbyj/g4cwRQEhjNtZpZ+WZWQ8T/zyXeEg0N/nODbD3QocxRsXiuCNwa30y2/XETJza4awMT5tYAkM/oak1q/wsWTwe0TmNDNgK4j41nwyVd8t2OPflnl8O223WR99jVExuuWNalHQ4Z3Kr9Q2rguDRjZ2bRCak0Yv7AGFBtAoa2LGb20rF2NN4dUvqD4xuB2tE+I0tdZTAKFLhcDJj9jyhvBuYu5DHrkOZwuCdEJumR1SIwqlZ5eHu8M62jeErckBUoeASlGy68W4uAjN59lgXYbSyd2J6aKjije0CiIjOfwidM88Pg08vKNq9R+NS+fwY88x8GjJyCqLoRq/1GiQgNveu6XR/E8KSrUFFd3KpQYgKHr/ooQZI1NpV6M+w6f+MgQPkjvos8/ULcNCMFX2VvpOXIqZ85d0C6riHMXc7lt3BN8vfE71ZFRR3uiiU0RvJ/ehYQo969L3ahQFum9LmXTAcBGRoZCbrXXUPfQMYSMu1syrqvntSISo8MIsCms2nVSW8eOYHC54NIpjp48w7I1G2nfvBG1426uB+AOm378hTsnPsUPO/eqB+q2hphEbboB0we0ZoSG53r9mCq4JPxrj3HOJ6Aq33/0oo36Y+sjeMwoqb2b1GDmsI6aAya6NIhl+/EL7Dyh8TkeUQNyz8LVS+RcuMTcpcvZf/g47ZonUzXMvTIwR06e5qHn3mDqC2+Rc6Eo1S6iJiR1Qaur7p5WtZkxuINmT1+3hrFs/fUce0/nahNwM0G03p4pGLvgLhSxzAiJ9WLC2Pr07bqXSi9dLaD9tOXsOaWxIFZhHuz4Gi6VLBLZbTb6devAXT1TSGndlKS6tXEEqPOT/IJC9hw6wsYfdvDZmk2sWL+FwutX+8LjoOmtYNf2LE6uHs6Wp/rpTjk/dzmfdtO+5ODZ33TJKUHcLhi/4GGkeEOvKEUI1j7Wm65JxhSx+v7wOTq9sIICp8b6iC4n7FkPZw6Ue0p4mOrNu/RbBWV5oxMguTso2nIN7Ipg45/66n/LKWLTgTN0/ftX6tuIXgSTbLQZMBDorFfWU7c3MzRYskbVYFxSslbrc08oEF0XAsPgtzPgLLzplLz8gvLfFhzBUL8TJLRVZWnk2btbMqRDgub2NxJfLZTf851s2GfACqjgFxttB6QDTfTIaRVfjayxxs9UuyTF8uW2Y5y4qLWMvoCwKKjRSL2Dr14CZyWvh4GhULsZNOoBVWLRExvTITGKzFEphgeQdkuKY9lPR42ocHrMjiRWb/zPK2ltTSmxZlcEbw3tQOfpK5B6RjxbgPr6VqcV/Jajzg1+vwQFRRcwIAiCwyE8VjUYgwKiXhvYTld6enk47AozBrejx8tf65QkY+wIEQXar+6dLWoZmol7Ix0To+nfKp6PfzhigDQBYdHqP5O5v22dMsvRGUX3hnH0a1aT5dv1bFwqohSQmt1aQsALOipwuMsL97Y2wxFiGjZFMK2/+VH10wfoTlOLUtBR7qV34xo0q6W7VmGlJFcPp2/Tmqb3YxR3NK9Fwzjzw8Zb1K7GLcm6Rt8QBR0ewJEWpmP5R0FnFRNX8W5C53UJ1GwANkXQr5l1d+VtTWsQYPP9Wr4Ou0IfC0er2/WlqQVqvqIN48ItTY6oEhRAYz+o4Nm0ZgRhgdbthBcZ6tCVpqYA+Voamhy3VibeSAHzFD+7LnmaDaBqsPWpURFe6NNTqgZbX0wlQvtInKcAl7W0zL1i+SaXFBZoslVLyb3sjetys5vbTS4rCM5paemNdKxz53w/HevkKUPX7N3i3DnN5WxzFCSaWp/wQjrWPoPTsczgxGnrawvvO6wxgEZyVgFtBnD49HmOnrTOCE7nXGCX1i9qIXuPnuF0jv5QNHc5cvI0B7X+DoIcBTispa20B7F8/RZtHWvgy3WbcQlj6/8lxVYxfNbusgeyMtu6NLUv1n6DFFpfO8UhBcQhTW0dwSxbvVFjx57z2ZpN6lKtQShCMG9UZ+aPSTF2ncERYvF12aj9ugh5SAEOamocGMaX67/h593lR9wYxd5fj7JszSYIMW7d4b/6NaVLg1g614vh8T66wiFKExjKx6s2sPugEauXFbN970FWZH+rPU1NcFDBKX7R1NjuwBUazfP/u1Bb5x7wzIx3KQyOUNftDaB1nUieubMkITPj7ha0rF3NENk4gnEGRfDXd8xPU/vvNzJxhcaAXaMfIN++Q2He0IOAtujLyHiWfrWO1Zt/0KaAG6zb+jNLVqwxJB0LVJfyonFdSgWwBNpt/GNiN+OcOJHxLPpiFdnfbzdGXhl8vfE7Pl2dDZG1tYq4SObgowoICWjTNDoBCQyc+iyHjhk/Qz+Vc54hjz6PS6I7HQvU+IXMUZ3LrPrdILZKpbuKuU1MIk6X5P4pGRw/bbzv4shJNftJAkRrzlPYBkIW3wbapq3BVSG2PjkXLjH4kee5mKvJqVgmuZevcN/Df1EvYHQihOgfoivbFzCtbV0m32LA/pch1SA6gZNnzzHokef4zUCv6cXcy9w/JUPNeoptoIayaUHKb6A4NUzIbM0axbcCReGbn3eSOnQyh0/o9xCeOJNDjxFT1SFUCDUjRyed68W4tTPoK2ltjQltr9MahGDDd9tIGTLZEJ/JsVNn6TFiKlt+3qUGudbREXUklGy4lh0coN0AgsMhQU0t3LHvEClD/sDnazdpFrd83RY6DJzE978UpWMltNNdjCEuPIgPJ3Z1K3A1wKawZIIB+wSFRKi5isC2PQdIHTpZVxmbZas30j7tQX7ctU89kNgegnT4MAIKNsH14a/pC3cD2gvU7FkHp/Zd+9gntR0vPT6RFsnuRcds33uQJ16eyfJ11zmXoupAk17oidK1K4JVj/amm4d39cb9Z+jx8tfaE1MAkLBzDZw9dO3IHd078eJj42naIMEtCT/u2scTL81Uk1OLiamnhq1rRuxg9rBmUNoAXgemaJbpLITdayGntGOxU8sm3NWzMymtm5KcGE9kVfWZdf5SLrsPFqdjbWTTjze8jVarDY1vAZu+4IrXB7XTXJDq1a938uiH31V+YkU4C2Dnajh/rNThlNZNuatnCp1bNSE5MZ5q4erdfO7iJXYdOMLGH7azbM1Gdbi/nqg66o+v6LouLzN7+ONQygAW3AZihR6pSAkHNsPxnbrEUL0hNEjRlZEDavWRRen6al8MmrWeJVt/1SUDKWH/Jjixq/JzK6JGMtRP0Zygeg1F3MrMYavg+hpBQRfWAvpKawgB9TtD874QqmHWHhwOjXsWZeHq+/Gb1oww5LVu7kjPtp0tEyFUg27aW9usvfi6NEjV/+PDBc451hd/KFld2bLcSdsBjYGWensgqArENYTAEMi7AgWVvAaFVlNntElddFXfKCbQbmP5lFuoE6l/7cBhV+iSFMu87P36EzKDq0L1ZDXvMP9ySWZSeYRFqW8TDY25LiryfRYO/bj4U+kHiWAJEmNqBSs2qNFY/Zf3W1E61kU1dVsCAYHqBakSC0HGlo591kjXLmqto7/c2YKnP/lRvzDFBjWbqP+u/ga5RdelIE99INuLrkt4nKGLX9cQyuLrP5Y2gJq1V3Ls6AnA2K23AsPAg3IxekipH8NjRi7uFPFk36Ys++ko3xw0MOAjKMxw468QyUnE5TXXHyr9oM3oWQgssE4jYxFCdeSYkUZmUwQzBrf3px3DykDOZdaEUunRZewXwBz0ZIt6kUHtEuhUz7zEzw6JUdzfptK9GH0Vics278aDNxvA3OH7gOVWaGQkdkXw1/7656+VMe3eVn6VqHoNyefMe+Cm4I1y9gySr5iukMHc2aI29WPMT8pIiq3C7c2s26HMQF4q62DZBjBnxGrgezO1MRot5df8oS+D+IY5w9eX9YfyvS3SVeGOk76Ew67Q28Q9g2/EXxJVryHL3z20/G8xZ+SnIK0L+9VBkxpVLU3IrBIU4E/bxn3LnOHlzukqM2O/2D20ngXP/hvxm40jpfxTUdRXmVRsALNHrAS+NFono/GzhEzrEHJx0XyuXCp/kLmYgsYMYquosNCjSeTn+fQlAchFkZXuAFu5Acwdvg/E64aoZBLeSMjMybE+B9BDMnhn5LHKTnJvKhvmyAD2VXaatzjuhUTVvYf1lGczG7EDceVNd850zwBeG/g7Uk7AR13Eh05am6h65ORpDpzw2RHAhZQP3ujzLw/3X2bVycQMrVqZiQywNlFVX0KmyQiml+f0KQvPvBlB558EfvJUJ9NxBPPpKu2BzZ6ybE22OWv1+tkMVzI8aeCZAbz5cB44H0BjWRnTCAzjy/Vb+GnXftO72rbnACuztxqaqGoQZ5Eizd2hvxjP/ZmzR+0AMRxfmg/YA5Fh0Tz71nzTu3r69bn6EjLNQQJjmTPsqKcNtTm0Zw/7GClf1dTWLCLj+WRVNitMnAt8ue4bdYta7QmZJiGmM3u4pl1ftK9o1D7wBEIurvxEi4hORAJDH5tmyhayvx4/xYgnX1CHvRifWg38gFr7/qy1sXYDyMhwwe/DQazULMNIgsMhtgHnL+Vy/5SMks2eDCDnwiX6P/Tfqsy4JH0pWcaymqDzo9TfQhv61jRnTSjAmZcG6EyfMYg6rUCx8cPOvXQcNIk9hzx+JN7EgSMnSB06Wc3JU2xqMqwvINlKQOA96sRcO/oXteeNzUXY+iLYrVuWXoKqQL0OAOw/fJyuwx5m8fI1SA3bjUgpWfTFajoOmlRS7qV+J2ujeMtnP9ju5O2BurcPMy64bWJmAk77V5i0CbVH7FkPp/Ze+9ilbXOmP5JOaptmbjXf8N02nnxlFht/2FFyMLa+unuY99mLS+nN3Ad05qupGBvd+ND8KPKVzwGDSm1oxOVUs5XPlK5/1bRBQlGiajOS6tYiupqa8nX2/EX2/nqM7O+389majfyy/4ZrG5MIDbtp3jrOMCRbscs7eGeEYWVajQ9vnbQkjIL8f4C8zXDZHiHh4FY4uk2fmPgW6tZxJlwqD1lNkLiXN4cZN7vFrG+VtsRBRN58YLAp8j3h4knYvxkue1gSOSwK6nWEquZtiOU2QnxEfsEDvDta9z5xN2LOmPbLh07ubvkxuVHBqFvTe+/2CQpTEzKDw6HwKuRXEDwihPqDJ7RRs5y9/7onQUyn1r4HeX2qRy5edzH/h0mffysoWUCc6X25Q8FVyD2j7htYWPQGZQ8s2TdQ4/7AJnAWKUcyZ4SpIXnW3Jnjsmoj5CJAX7WG/xjkFmzOQbwz+pDZPVkT3D5n2FFq1e6J4FlAT9Gdf3ckUsxA/N7Fih8fvPFsTl/QHZS3QDa1vG/fZhuShzwJ5jAC70zOMtbYOXb0IeB5wOszLS9zBcFLnA/8Gx8OtDzU2Lsvt2MW1cTmnA5yuFf18BrycwQPMWuEpj0bjMDr3g0AJmT1wiX/AnT1tioWsRkpn64sacMKfMMAipnwXjdc8invexHNQm5B8qzZr3ae4FsGUMyEhS1xiUdBDsUsZ5V1SBCrcLlmMHfEZ95W5kZ80wCKGb0oHnvhUGASUH6Zb9/kBLAA4ZzNrFHmR6tqxLcNoJiMNXZOHL0VlxgEsj/gcyG5RZxH8AlSLqZW/Kqiols+jX8YwPWkLXFQNa87gr5AX8D4mnAeIXYgXSsQcgUXgtd541VOD/5nADcyKbM6BfZUIBXoADQDzNpm/CKwDfgWKTeAPZs5Q63PTDUQ/zeAspiYmYAzoDGQiJAJIOsgiQURBUQBIahFMoudULlAIXAFyAGZA+IUgiPAQQQHKVR2GhWF40v8H6J6z9ohz1ZiAAAAAElFTkSuQmCC"},237:function(e,t,r){e.exports=r(423)},420:function(e,t,r){},421:function(e,t,r){},423:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(70),s=r(21),c=r(22),i=r(25),l=r(23),u=r(26),m=r(444),d=r(450),h=r(436),f=r(435),E=r(446),p=r(447),g=r(24),b=r(83),v=r(431),C=r(441),A=r(438),y=r(443),w={customerManagementBackendNotAvailable:"The Customer Management backend is currently not\n                                    available. Please follow the instructions in the corresponding\n                                    README to ensure that it is running and listening on the right\n                                    port."},N=r(100),O=r.n(N);function j(e,t){return null!=window._env[e]?window._env[e]:null!=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_CUSTOMER_MANAGEMENT_BACKEND:"http://lakeside-management-backend.azurewebsites.net/",REACT_APP_CUSTOMER_SELF_SERVICE_BACKEND:"http://localhost:8080"})[e]?Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_CUSTOMER_MANAGEMENT_BACKEND:"http://lakeside-management-backend.azurewebsites.net/",REACT_APP_CUSTOMER_SELF_SERVICE_BACKEND:"http://localhost:8080"})[e]:t}var I=j("REACT_APP_CUSTOMER_SELF_SERVICE_BACKEND",""),T=j("REACT_APP_CUSTOMER_MANAGEMENT_BACKEND",""),S=r(28),M=new S.b.Entity("notifications",void 0,{idAttribute:"customerId"}),k=Object(g.b)("notifications")({retrieveNotifications:{method:"GET",url:"".concat(T,"/notifications"),normalizer:function(e){return Object(S.a)(e,new S.b.Array(M))}}}),R=k.actions,F=R.resource.reset,B=R.retrieveNotifications.perform,P=k.selectors.resource.getResource,x=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={didTimeout:!1,isConnected:!1,notifications:[],redirectCustomerId:null},r.clientRef=n.createRef(),r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.resetNotifications(),this.props.retrieveNotifications(function(){},function(){}),this.timeout=setTimeout(function(){var t=e.clientRef.current;t&&(e.setState({didTimeout:!0}),t.disconnect())},5e3)}},{key:"componentDidUpdate",value:function(e){this.props.notifications.length>0&&0===e.notifications.length&&this.setState({notifications:this.props.notifications})}},{key:"renderNotifications",value:function(){var e=this,t=this.state,r=t.notifications,a=t.isConnected,o=t.didTimeout;return n.createElement(n.Fragment,null,a&&!o&&r.length>0&&n.createElement(A.a,{color:"blue",selectable:!0},n.createElement(A.a.Body,null,r.map(function(t,r){return n.createElement(A.a.Row,{key:r,style:{cursor:"pointer"},onClick:function(){e.setState({redirectCustomerId:t.customerId})}},n.createElement(A.a.Cell,null,n.createElement("b",null,t.username)),n.createElement(A.a.Cell,{collapsing:!0},n.createElement(b.a,{circular:!0,color:"blue"},1===t.count?"1 Message":"".concat(t.count," Messages"))))}))),a&&!o&&0===r.length&&n.createElement("p",null,"There are currently no new notifications."),!a&&!o&&n.createElement(v.a,{active:!0,inline:!0,size:"small"}),!a&&o&&n.createElement(C.a,{error:!0,header:"Error",content:w.customerManagementBackendNotAvailable}),n.createElement(O.a,{url:"".concat(T,"/ws"),topics:["/topic/notifications"],onMessage:function(t){e.setState({notifications:t})},onConnect:function(){e.timeout&&clearTimeout(e.timeout),e.setState({isConnected:!0})},ref:this.clientRef}))}},{key:"render",value:function(){var e=this.state.redirectCustomerId;return null!=e?n.createElement(y.a,{to:"/customers/".concat(e),push:!0}):this.renderNotifications()}}]),t}(n.Component),D=Object(g.a)(function(e,t){return{notifications:P(e)}},function(e){return{retrieveNotifications:function(t,r){e(B({onSuccess:t,onError:r}))},resetNotifications:function(){return e(F())}}})(x),L=r(445),z=r(437),U=r(432),Q=r(424),W=r(17),Z=r.n(W),X=r(40),H=new S.b.Entity("customers",void 0,{idAttribute:"customerId"}),G=Object(g.b)("customers")({retrieveCustomers:{method:"GET",url:"".concat(T,"/customers"),normalizer:function(e){return Object(S.a)(e,{customers:[H]})},metadataNormalizer:function(e){return{offset:e.offset,limit:e.limit,size:e.size}}},retrieveCustomer:{method:"GET",url:"".concat(T,"/customers/:customerId"),normalizer:function(e){return Object(S.a)(e,H)}},updateCustomer:{method:"PUT",url:"".concat(T,"/customers/:customerId"),normalizer:function(e){return Object(S.a)(e,H)},networkHelpers:{handleError:function(){var e=Object(X.a)(Z.a.mark(function e(t,r){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}},createCustomer:{method:"POST",url:"".concat(I,"/customers"),normalizer:function(e){return Object(S.a)(e,H)},networkHelpers:{handleError:function(){var e=Object(X.a)(Z.a.mark(function e(t,r){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),requestPOST:function(e){return{method:"POST",headers:{Accept:"application/json","X-Auth-Token":"".concat(localStorage.getItem("token")||""),"Content-Type":"application/json"},body:JSON.stringify(e)}}}}}),Y=G.actions,q=Y.resource.reset,K=Y.retrieveCustomers.perform,V=Y.retrieveCustomer.perform,J=Y.updateCustomer.perform,_=Y.createCustomer.perform,$=G.selectors,ee=$.resource,te=ee.getResource,re=ee.getResourceById,ne=$.retrieveCustomers.request,ae=ne.isPerforming,oe=ne.getMetadata,se=($.retrieveCustomer.request.isPerforming,$.updateCustomer.request.isPerforming),ce=r(49),ie=r(442),le=r(433),ue=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={error:!1,filter:"",activeFilter:""},r.onSuccess=function(){r.setState({error:!1})},r.onError=function(){r.setState({error:!0})},r.loadCustomers=function(e){r.props.resetCustomers(),r.props.retrieveCustomers(r.state.filter,e,r.onSuccess,r.onError),r.setState({activeFilter:r.state.filter})},r.onChange=function(e,t){r.setState({filter:t.value})},r.onSubmit=function(){r.loadCustomers(0)},r.loadPreviousPage=function(){var e=r.props.metadata,t=(e.offset||0)-(e.limit||0);t>=0&&r.loadCustomers(t)},r.loadNextPage=function(){var e=r.props.metadata,t=(e.offset||0)+(e.limit||0);t<(e.size||0)&&r.loadCustomers(t)},r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadCustomers(0)}},{key:"renderCustomerName",value:function(e){var t="".concat(e.firstname," ").concat(e.lastname);if(""===this.state.activeFilter)return t;var r=t.toLowerCase().indexOf(this.state.activeFilter.toLowerCase());if(-1===r)return t;var a=r+this.state.activeFilter.length;return n.createElement("span",null,t.substring(0,r),n.createElement("b",null,t.substring(r,a)),t.substring(a))}},{key:"renderCustomers",value:function(){var e=this,t=this.props.metadata,r=t.offset||0,a=t.limit||0,o=t.size||0,s=0===r,c=r+a>=o;return n.createElement(n.Fragment,null,n.createElement(L.a,{columns:2},n.createElement(L.a.Row,null,n.createElement(L.a.Column,null,n.createElement(z.a,{onSubmit:this.onSubmit,style:{flexDirection:"row",flex:1}},n.createElement(U.a,{placeholder:"Search...",fluid:!0,onChange:this.onChange,action:!0,autoFocus:!0},n.createElement("input",null),n.createElement(Q.a,{type:"submit",loading:this.props.isRetrievingCustomers,primary:!0},n.createElement(ce.a,{name:"search"})," Search")))),n.createElement(L.a.Column,null,n.createElement(Q.a,{color:"green",floated:"right",as:le.a,to:"/customers/new"},n.createElement(ce.a,{name:"add"}),"New Customer")))),n.createElement(A.a,{celled:!0},n.createElement(A.a.Header,null,n.createElement(A.a.Row,null,n.createElement(A.a.HeaderCell,null,"Name"),n.createElement(A.a.HeaderCell,null,"Email"),n.createElement(A.a.HeaderCell,null,"Address"),n.createElement(A.a.HeaderCell,null))),n.createElement(A.a.Body,null,this.props.customers.map(function(t){return n.createElement(A.a.Row,{key:t.customerId},n.createElement(A.a.Cell,null,e.renderCustomerName(t)),n.createElement(A.a.Cell,null,t.email),n.createElement(A.a.Cell,null,"".concat(t.streetAddress,", ").concat(t.postalCode," ").concat(t.city)),n.createElement(A.a.Cell,null,n.createElement(Q.a,{as:le.a,to:"/customers/".concat(t.customerId)},"Show")))})),n.createElement(A.a.Footer,null,n.createElement(A.a.Row,null,n.createElement(A.a.HeaderCell,null,r+1," - ",Math.min(r+a,o)," of ",o),n.createElement(A.a.HeaderCell,{colSpan:"3"},n.createElement(ie.a,{floated:"right",pagination:!0},n.createElement(ie.a.Item,{as:"a",icon:!0,onClick:this.loadPreviousPage,disabled:s},n.createElement(ce.a,{name:"chevron left"})),n.createElement(ie.a.Item,{as:"a",icon:!0,onClick:this.loadNextPage,disabled:c},n.createElement(ce.a,{name:"chevron right"}))))))))}},{key:"render",value:function(){var e=this.state.error;return n.createElement(n.Fragment,null,e&&n.createElement(C.a,{error:!0,header:"Error",content:w.customerManagementBackendNotAvailable}),!e&&this.renderCustomers())}}]),t}(n.Component),me=Object(g.a)(function(e,t){return{customers:te(e),metadata:oe(e,t),isRetrievingCustomers:ae(e,t)}},function(e){return{retrieveCustomers:function(t,r,n,a){return e(K({onSuccess:n,onError:a,query:{filter:t,offset:r}}))},resetCustomers:function(){return e(q())}}})(ue),de=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={},r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement(E.a,null,n.createElement(p.a,{as:"h3",content:"Notifications"}),n.createElement(D,null),n.createElement(p.a,{as:"h3",content:"Customers"}),n.createElement(me,null))}}]),t}(n.Component),he=r(107),fe=r(448),Ee=new S.b.Entity("users",void 0,{idAttribute:"email"}),pe=Object(g.b)("users")({signupUser:{method:"POST",url:"".concat(I,"/auth/signup"),normalizer:function(e){return Object(S.a)(e,Ee)},networkHelpers:{handleError:function(){var e=Object(X.a)(Z.a.mark(function e(t,r){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}},loginUser:{method:"POST",url:"".concat(I,"/auth"),normalizer:function(e){return Object(S.a)(e,Ee)},networkHelpers:{handleError:function(){var e=Object(X.a)(Z.a.mark(function e(t,r){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}}}).actions,ge=pe.signupUser.perform,be=pe.loginUser.perform;var ve=new Map([["email","Email Address"],["password","Password"],["firstname","First Name"],["lastname","Last Name"],["birthday","Date of Birth"],["streetAddress","Street Address"],["postalCode","Postal Code"],["city","City"],["phoneNumber","Phone Number"]]),Ce=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={isCreatingCustomer:!1,redirectToOverview:!1,email:"",password:"",firstname:"",lastname:"",birthday:"",streetAddress:"",postalCode:"",city:"",phoneNumber:"",formError:null},r.handleChange=function(e,t){var n=t.name,a=t.value;r.setState(Object(he.a)({},n,a))},r.handleSubmit=Object(X.a)(Z.a.mark(function e(){var t,n,a,o,s,c,i,l,u,m,d;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state,n=t.email,a=t.password,o=t.firstname,s=t.lastname,c=t.birthday,i=t.streetAddress,l=t.postalCode,u=t.city,m=t.phoneNumber,e.prev=1,r.setState({isCreatingCustomer:!0}),e.next=5,r.props.signupUser(n,a);case 5:return e.next=7,r.props.loginUser(n,a);case 7:return d=e.sent,localStorage.setItem("token",d),e.next=11,r.props.createCustomer(o,s,c,i,l,u,m);case 11:r.setState({isCreatingCustomer:!1,redirectToOverview:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),r.setState({isCreatingCustomer:!1}),e.t0.response.json().then(function(e){var t,n,a=(n=ve,409===(t=e).status?{errorFields:["email"],errorMessages:["This email address has already been taken."]}:null!=t.errors?{errorFields:t.errors.map(function(e){return e.field}),errorMessages:t.errors.map(function(e){return"".concat(n.get(e.field)||e.field," ").concat(e.defaultMessage)})}:{errorFields:[],errorMessages:[w.customerManagementBackendNotAvailable]});r.setState({formError:a})});case 18:case"end":return e.stop()}},e,this,[[1,14]])})),r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"renderTextField",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text";return a.a.createElement(z.a.Input,{label:ve.get(e),placeholder:ve.get(e),type:n,name:e,value:t,onChange:this.handleChange,error:r.includes(e)})}},{key:"render",value:function(){var e=this.state,t=e.isCreatingCustomer,r=e.email,n=e.password,o=e.firstname,s=e.lastname,c=e.birthday,i=e.streetAddress,l=e.postalCode,u=e.city,m=e.phoneNumber,d=e.formError,h=!r||!n||!o||!s||!c||!i||!l||!u||!m,f=!!d,g=d?d.errorFields:[],b=d?d.errorMessages:[];return this.state.redirectToOverview?a.a.createElement(y.a,{to:"/",push:!0}):a.a.createElement(E.a,null,a.a.createElement(fe.a,{style:{fontSize:"1.28571429rem",marginTop:0,paddingTop:0}},a.a.createElement(fe.a.Section,{link:!0,as:le.a,to:"/"},"Customers"),a.a.createElement(fe.a.Divider,{icon:"right angle"}),a.a.createElement(fe.a.Section,null,"New Customer")),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(z.a,{onSubmit:this.handleSubmit,error:f},a.a.createElement(p.a,null,"Login Credentials"),a.a.createElement(z.a.Group,{widths:"equal"},this.renderTextField("email",r,g),this.renderTextField("password",n,g,"password")),a.a.createElement(p.a,null,"Customer Profile"),a.a.createElement(z.a.Group,{widths:"equal"},this.renderTextField("firstname",o,g),this.renderTextField("lastname",s,g)),this.renderTextField("birthday",c,g,"date"),this.renderTextField("streetAddress",i,g),a.a.createElement(z.a.Group,{widths:"equal"},this.renderTextField("postalCode",l,g),this.renderTextField("city",u,g)),this.renderTextField("phoneNumber",m,g),a.a.createElement(Q.a,{fluid:!0,color:"blue",disabled:h||t,loading:t},"Create Customer"),a.a.createElement(C.a,{error:!0},a.a.createElement(C.a.Header,null,"Update failed"),a.a.createElement(C.a.List,{items:b}))))}}]),t}(a.a.Component),Ae=Object(g.a)(function(e,t){return{}},function(e){return{signupUser:function(t,r){return new Promise(function(n,a){e(ge({onSuccess:n,onError:a,body:{email:t,password:r}}))})},loginUser:function(t,r){return new Promise(function(n,a){e(be({onSuccess:function(e){return n(e.users[t].token)},onError:a,body:{email:t,password:r}}))})},createCustomer:function(t,r,n,a,o,s,c){return new Promise(function(i,l){e(_({onSuccess:i,onError:l,body:{firstname:t,lastname:r,birthday:n,streetAddress:a,postalCode:o,city:s,phoneNumber:c}}))})}}})(Ce),ye=new S.b.Entity("interactionlogs",void 0,{idAttribute:"customerId"}),we=Object(g.b)("interactionlogs")({retrieveInteractionLog:{method:"GET",url:"".concat(T,"/interaction-logs/:customerId"),normalizer:function(e){return Object(S.a)(e,ye)}},acknowledgeInteractions:{method:"PATCH",url:"".concat(T,"/interaction-logs/:customerId"),normalizer:function(e){return Object(S.a)(e,ye)}}}),Ne=we.actions,Oe=Ne.resource.reset,je=Ne.retrieveInteractionLog.perform,Ie=Ne.acknowledgeInteractions.perform,Te=we.selectors,Se=Te.resource.getResourceById,Me=Te.retrieveInteractionLog.request.isPerforming,ke=r(439),Re=r(440),Fe=r(41),Be=r.n(Fe),Pe=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={showOldAddresses:!1},r.handleClick=function(){var e=r.state.showOldAddresses;r.setState({showOldAddresses:!e})},r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.showOldAddresses,t=this.props.customer,r=t.firstname,a=t.lastname,o=t.streetAddress,s=t.birthday,c=t.postalCode,i=t.city,l=t.email,u=t.phoneNumber,m=t.moveHistory;return n.createElement(n.Fragment,null,n.createElement(L.a,{columns:"two"},n.createElement(L.a.Row,null,n.createElement(L.a.Column,null,n.createElement(ke.a,null,n.createElement(ke.a.Item,null,n.createElement(ke.a.Icon,{name:"user"}),n.createElement(ke.a.Content,null,n.createElement(ke.a.Header,null,"Name"),n.createElement(ke.a.Description,null,r," ",a))),n.createElement(ke.a.Item,null,n.createElement(ke.a.Icon,{name:"marker"}),n.createElement(ke.a.Content,null,n.createElement(ke.a.Header,null,"Address"),n.createElement(ke.a.Description,null,o,", ",c," ",i))),n.createElement(ke.a.Item,null,m.length>0&&n.createElement(Re.a,null,n.createElement(Re.a.Title,{active:e,index:0,onClick:this.handleClick},n.createElement(ce.a,{name:"dropdown"}),"Old Addresses"),n.createElement(Re.a.Content,{active:e},n.createElement(ke.a,{bulleted:!0,style:{marginLeft:40}},m.map(function(e,t){return n.createElement(ke.a.Item,{key:"".concat(t)},e.streetAddress,", ",e.postalCode," ",e.city)}))))))),n.createElement(L.a.Column,null,n.createElement(ke.a,null,n.createElement(ke.a.Item,null,n.createElement(ke.a.Icon,{name:"calendar"}),n.createElement(ke.a.Content,null,n.createElement(ke.a.Header,null,"Date of Birth"),n.createElement(ke.a.Description,null,Be()(s).format("MMMM Do YYYY")))),n.createElement(ke.a.Item,null,n.createElement(ke.a.Icon,{name:"mail"}),n.createElement(ke.a.Content,null,n.createElement(ke.a.Header,null,"Email Address"),n.createElement(ke.a.Description,null,n.createElement("a",{href:"mailto:".concat(l)},l)))),n.createElement(ke.a.Item,null,n.createElement(ke.a.Icon,{name:"phone"}),n.createElement(ke.a.Content,null,n.createElement(ke.a.Header,null,"Phone Number"),n.createElement(ke.a.Description,null,u))))))))}}]),t}(n.Component),xe=(r(420),function(e){return a.a.createElement("li",{className:"chat ".concat(e.message.sentByOperator?"right":"left")},e.message.content)}),De=r(434),Le=function(e){return a.a.createElement("li",{className:"groupSeparator"},a.a.createElement(De.a,{clearing:!0,section:!0,horizontal:!0},Be()(e.date).fromNow()))},ze=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).chatRef=n.createRef(),r.state={content:""},r.handleChange=function(e,t){var n=t.value;r.setState({content:n})},r.submitMessage=function(){var e=r.state.content;""!==e&&(r.props.onSubmit(e),r.setState({content:""}))},r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"scrollToBottom",value:function(){var e=this.chatRef.current;e&&(e.scrollTop=e.scrollHeight)}},{key:"groupMessages",value:function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,i=void 0;if(0===t.length)i=[],t.push(i);else{var l=t[t.length-1],u=l[l.length-1],m=Be()(u.date),d=Be()(c.date);Be.a.duration(d.diff(m)).asMinutes()>10?(i=[],t.push(i)):i=l}i.push(c)}}catch(h){n=!0,a=h}finally{try{r||null==s.return||s.return()}finally{if(n)throw a}}return t}},{key:"render",value:function(){var e=this.state.content,t=this.props.messages,r=this.groupMessages(t);return n.createElement("div",{className:"chatroom"},n.createElement("ul",{className:"chats",ref:this.chatRef},r.map(function(e,t){return n.createElement(n.Fragment,{key:"group-".concat(t)},null!=e[0].date&&n.createElement(Le,{date:new Date(e[0].date)}),e.map(function(e,r){return n.createElement(xe,{message:e,key:"message-".concat(t,"-").concat(r)})}))}),0===t.length&&n.createElement("p",{className:"nomessages"},"There are no messages yet.",n.createElement("br",null)," Send a message to start a conversation.")),n.createElement(z.a,{onSubmit:this.submitMessage},n.createElement(U.a,{fluid:!0,type:"text",placeholder:"Enter a Message",action:!0,value:e,onChange:this.handleChange,autoFocus:!0},n.createElement("input",null),n.createElement(Q.a,{type:"submit",color:"green"},"Send"))))}}]),t}(n.Component),Ue=function(e){function t(e){var r;Object(s.a)(this,t),(r=Object(i.a)(this,Object(l.a)(t).call(this,e))).clientRef=n.createRef(),r.appendMessage=function(e){var t=r.state.messages.concat([e]);r.setState({messages:t})};var a=e.customer,o=e.interactionLog,c=o.interactions.map(function(e){return{id:e.id,username:o.username,content:e.content,customerId:a.customerId,date:e.date,sentByOperator:e.sentByOperator}});return r.state={didTimeout:!1,isConnected:!1,messages:c},r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timeout=setTimeout(function(){var t=e.clientRef.current;t&&(e.setState({didTimeout:!0}),t.disconnect())},5e3)}},{key:"render",value:function(){var e=this,t=this.state,r=t.messages,a=t.isConnected,o=t.didTimeout,s=this.props.customer;return n.createElement(n.Fragment,null,n.createElement(O.a,{url:"".concat(T,"/ws"),topics:["/topic/messages"],onMessage:function(t){e.props.didReceiveMessage(t),s.customerId===t.customerId&&e.appendMessage(t)},onConnect:function(){e.timeout&&clearTimeout(e.timeout),e.setState({isConnected:!0})},ref:this.clientRef}),a&&!o&&n.createElement(ze,{messages:r,onSubmit:function(t){var r=e.clientRef.current;if(r){var n={id:null,date:null,username:"".concat(s.firstname," ").concat(s.lastname),content:t,customerId:s.customerId,sentByOperator:!0};r.sendMessage("/chat/messages",JSON.stringify(n))}}}),!a&&!o&&n.createElement(v.a,{active:!0,inline:"centered"},"Loading"),!a&&o&&n.createElement(C.a,{error:!0,header:"Error",content:w.customerManagementBackendNotAvailable}))}}]),t}(n.Component),Qe=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={fetchCustomerError:!1,fetchInteractionLogError:!1,isConnected:!1},r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.customerId;null!=t&&(this.props.retrieveCustomer(t,function(){e.setState({fetchCustomerError:!1})},function(){e.setState({fetchCustomerError:!0})}),this.props.resetInteractionLogs(),this.props.retrieveInteractionLog(t,function(){e.setState({fetchInteractionLogError:!1})},function(){e.setState({fetchInteractionLogError:!0})}))}},{key:"componentDidUpdate",value:function(e){if(!this.props.isRetrievingInteractionLog&&e.isRetrievingInteractionLog&&this.props.interactionLog){var t=this.props.interactionLog,r=t.interactions.filter(function(e){return!e.sentByOperator});r.length>0&&r[r.length-1].id!==t.lastAcknowledgedInteractionId&&this.acknowledgeInteractions(r[r.length-1].id)}}},{key:"acknowledgeInteractions",value:function(e){var t=this.props.match.params.customerId;null!=t&&this.props.acknowledgeInteractions(t,e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.customer,a=t.interactionLog,o=this.state,s=o.fetchCustomerError,c=o.fetchInteractionLogError;return n.createElement(E.a,null,n.createElement(fe.a,{style:{fontSize:"1.28571429rem",marginTop:0,paddingTop:0}},n.createElement(fe.a.Section,{link:!0,as:le.a,to:"/"},"Customers"),n.createElement(fe.a.Divider,{icon:"right angle"}),n.createElement(fe.a.Section,null,r&&!s&&"".concat(r.firstname," ").concat(r.lastname),!r&&!s&&"Loading...",!r&&s&&"Error!")),n.createElement(Q.a,{as:"a",compact:!0,size:"mini",floated:"right",href:"http://localhost:3010/customers/".concat(this.props.match.params.customerId||"")},n.createElement(ce.a,{name:"external"}),"Open in Policy Management"),s&&n.createElement(C.a,{error:!0,header:"Error",content:w.customerManagementBackendNotAvailable}),!s&&r&&n.createElement(n.Fragment,null,n.createElement(p.a,{as:"h4"},"Customer Profile",n.createElement(Q.a,{as:le.a,to:"/customers/".concat(r.customerId,"/edit_profile"),floated:"right",size:"mini",basic:!0,compact:!0},n.createElement(ce.a,{name:"edit"}),"Edit Profile")),n.createElement(Pe,{customer:r})),c&&n.createElement(C.a,{error:!0,header:"Error",content:w.customerManagementBackendNotAvailable}),!s&&!c&&r&&a&&n.createElement(n.Fragment,null,n.createElement(p.a,{as:"h4"},"Chat"),n.createElement(Ue,{customer:r,interactionLog:a,didReceiveMessage:function(t){t.sentByOperator||null==t.id||e.acknowledgeInteractions(t.id)}})))}}]),t}(n.Component),We=Object(g.a)(function(e,t){var r=t.match.params.customerId;return{customer:re(e,r),interactionLog:Se(e,r),isRetrievingInteractionLog:Me(e,t)}},function(e){return{retrieveCustomer:function(t,r,n){return e(V({onSuccess:r,onError:n,urlParams:{customerId:t}}))},retrieveInteractionLog:function(t,r,n){return e(je({onSuccess:r,onError:n,urlParams:{customerId:t}}))},resetInteractionLogs:function(){return e(Oe())},acknowledgeInteractions:function(t,r){return e(Ie({onSuccess:function(){},onError:function(){},urlParams:{customerId:t},body:{lastAcknowledgedInteractionId:r}}))}}})(Qe);var Ze=new Map([["firstname","First Name"],["lastname","Last Name"],["birthday","Date of Birth"],["streetAddress","Street Address"],["postalCode","Postal Code"],["city","City"],["email","Email Address"],["phoneNumber","Phone Number"]]),Xe=function(e){function t(){var e,r;Object(s.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={fetchCustomerError:!1,redirectToOverview:!1,firstname:"",lastname:"",birthday:"",streetAddress:"",postalCode:"",city:"",phoneNumber:"",email:"",formError:null},r.handleChange=function(e,t){var n=t.name,a=t.value;r.setState(Object(he.a)({},n,a))},r.handleSubmit=Object(X.a)(Z.a.mark(function e(){var t,n,a,o,s,c,i,l,u,m,d;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!=(t=r.props.match.params.customerId)&&(n=r.state,a=n.firstname,o=n.lastname,s=n.birthday,c=n.streetAddress,i=n.postalCode,l=n.city,u=n.email,m=n.phoneNumber,d={firstname:a,lastname:o,birthday:s,streetAddress:c,postalCode:i,city:l,email:u,phoneNumber:m},r.props.updateCustomer(t,d,function(){r.setState({formError:null,redirectToOverview:!0})},function(e){e&&e.response.json().then(function(e){var t,n,a=(n=Ze,null!=(t=e).errors?{errorFields:t.errors.map(function(e){return e.field}),errorMessages:t.errors.map(function(e){return"".concat(n.get(e.field)||e.field," ").concat(e.defaultMessage)})}:{errorFields:[],errorMessages:[w.customerManagementBackendNotAvailable]});r.setState({formError:a})})}));case 2:case"end":return e.stop()}},e,this)})),r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.customer)this.updateFormState(this.props.customer);else{var t=this.props.match.params.customerId;null!=t&&this.props.retrieveCustomer(t,function(){e.setState({fetchCustomerError:!1})},function(){e.setState({fetchCustomerError:!0})})}}},{key:"updateFormState",value:function(e){var t=e.firstname,r=e.lastname,n=e.birthday,a=e.streetAddress,o=e.postalCode,s=e.city,c=e.email,i=e.phoneNumber,l=Be()(n).format("YYYY-MM-DD");this.setState({firstname:t,lastname:r,birthday:l,streetAddress:a,postalCode:o,city:s,email:c,phoneNumber:i})}},{key:"componentDidUpdate",value:function(e){this.props.customer&&!e.customer&&this.updateFormState(this.props.customer)}},{key:"renderTextField",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text";return a.a.createElement(z.a.Input,{label:Ze.get(e),placeholder:Ze.get(e),type:n,name:e,value:t,onChange:this.handleChange,error:r.includes(e)})}},{key:"render",value:function(){var e=this.props,t=e.customer,r=e.isUpdatingCustomer,n=this.state,o=n.fetchCustomerError,s=n.firstname,c=n.lastname,i=n.birthday,l=n.streetAddress,u=n.postalCode,m=n.city,d=n.email,h=n.phoneNumber,f=n.formError,p=!!f,g=f?f.errorFields:[],b=f?f.errorMessages:[];return t?this.state.redirectToOverview?a.a.createElement(y.a,{to:"/customers/".concat(t.customerId),push:!0}):a.a.createElement(E.a,null,a.a.createElement(fe.a,{style:{fontSize:"1.28571429rem",marginTop:0,paddingTop:0}},a.a.createElement(fe.a.Section,{link:!0,as:le.a,to:"/"},"Customers"),a.a.createElement(fe.a.Divider,{icon:"right angle"}),a.a.createElement(fe.a.Section,{link:!0,as:le.a,to:"/customers/".concat(t?t.customerId:"")},t&&!o&&"".concat(t.firstname," ").concat(t.lastname),!t&&!o&&"Loading...",!t&&o&&"Error!"),a.a.createElement(fe.a.Divider,{icon:"right angle"}),a.a.createElement(fe.a.Section,null,"Edit Profile")),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(z.a,{onSubmit:this.handleSubmit,error:p},a.a.createElement(z.a.Group,{widths:"equal"},this.renderTextField("firstname",s,g),this.renderTextField("lastname",c,g)),this.renderTextField("birthday",i,g,"date"),this.renderTextField("streetAddress",l,g),a.a.createElement(z.a.Group,{widths:"equal"},this.renderTextField("postalCode",u,g),this.renderTextField("city",m,g)),this.renderTextField("email",d,g),this.renderTextField("phoneNumber",h,g),a.a.createElement(Q.a,{fluid:!0,color:"blue",disabled:r,loading:r},"Save Changes"),a.a.createElement(C.a,{error:!0},a.a.createElement(C.a.Header,null,"Update failed"),a.a.createElement(C.a.List,{items:b})))):a.a.createElement(v.a,{active:!0})}}]),t}(a.a.Component),He=Object(g.a)(function(e,t){var r=t.match.params.customerId;return{customer:re(e,r),isUpdatingCustomer:se(e,t)}},function(e){return{retrieveCustomer:function(t,r,n){return e(V({onSuccess:r,onError:n,urlParams:{customerId:t}}))},updateCustomer:function(t,r,n,a){return e(J({onSuccess:n,onError:a,urlParams:{customerId:t},body:r}))}}})(Xe),Ge=r(226),Ye=r(223),qe=r.n(Ye),Ke={siteheader:{display:"inline-flex",marginTop:20,alignItems:"center"},logo:{height:65,marginRight:10},header:{fontSize:28,lineHeight:"28px",fontWeight:"bold",color:"#192a56",marginBottom:5},subheader:{fontSize:22,lineHeight:"22px",fontWeight:"lighter",color:"#273c75",margin:0,padding:0}},Ve=function(e){return a.a.createElement(le.a,{to:"/"},a.a.createElement("div",{style:Ke.siteheader},a.a.createElement(Ge.a,{src:qe.a,style:Ke.logo}),a.a.createElement("div",null,a.a.createElement("div",{style:Ke.header},"Customer Management"),a.a.createElement("div",{style:Ke.subheader},"Lakeside Mutual"))))},Je=r(449),_e=Object(Je.a)(function(e){return a.a.createElement(E.a.Group,{style:{marginTop:"1em"}},a.a.createElement(E.a,null,a.a.createElement(ie.a,{pointing:!0,secondary:!0,color:"blue"},a.a.createElement(ie.a.Item,{name:"Home",icon:"dashboard",active:"/"===e.location.pathname,as:le.a,to:"/"}))))}),$e=r(110),et=r(51),tt=r(225),rt=Object(et.c)({restEasy:g.c}),nt=function(){return Object(et.e)(rt,{},Object(et.d)(Object(et.a)(tt.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}))}(),at=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement($e.a,{store:nt},a.a.createElement(m.a,null,a.a.createElement(f.a,{text:!0},a.a.createElement(Ve,null),a.a.createElement(_e,null),a.a.createElement(d.a,null,a.a.createElement(h.a,{exact:!0,path:"/",render:function(e){return a.a.createElement(de,e)}}),a.a.createElement(h.a,{exact:!0,path:"/customers/new",render:function(e){return a.a.createElement(Ae,e)}}),a.a.createElement(h.a,{exact:!0,path:"/customers/:customerId",render:function(e){return a.a.createElement(We,e)}}),a.a.createElement(h.a,{exact:!0,path:"/customers/:customerId/edit_profile",render:function(e){return a.a.createElement(He,e)}})),a.a.createElement("p",{style:{color:"#0000"}},"REACT_APP_CUSTOMER_SELF_SERVICE_BACKEND:"," ",I),a.a.createElement("p",{style:{color:"#0000"}},"REACT_APP_CUSTOMER_MANAGEMENT_BACKEND: ",T))))}}]),t}(a.a.Component);r(421),r(422);Object(o.render)(a.a.createElement(at,null),document.getElementById("root"))}},[[237,1,2]]]);
//# sourceMappingURL=main.db82689c.chunk.js.map