{"version":3,"sources":["images/logo.png","errorMessages.js","config.js","redux-rest-easy/notifications.js","pages/Home/Notifications.js","redux-rest-easy/customers.js","pages/Home/Customers.js","pages/Home/index.js","redux-rest-easy/users.js","pages/NewCustomer/index.js","redux-rest-easy/interactionlogs.js","pages/CustomerDetail/CustomerProfileView.js","components/ChatRoom/MessageBubble.js","components/ChatRoom/GroupSeparator.js","components/ChatRoom/index.js","pages/CustomerDetail/ChatView.js","pages/CustomerDetail/index.js","pages/EditCustomer/index.js","components/SiteHeader.js","components/MenuBar.js","redux/reducers.js","App.js","redux/configureStore.js","index.js"],"names":["module","exports","src_errorMessages","customerManagementBackendNotAvailable","getEnvironmentVariable","name","defaultValue","window","_env","process","customerSelfServiceBackend","customerManagementBackend","notificationSchema","schema","Entity","undefined","idAttribute","notifications","createResource","retrieveNotifications","method","url","concat","normalizer","data","normalize","Array","actions","resetNotifications","resource","reset","perform","getAllNotifications","selectors","getResource","Notifications","state","didTimeout","isConnected","redirectCustomerId","clientRef","React","_this2","this","props","timeout","setTimeout","client","current","setState","disconnect","prevProps","length","_this3","_this$state","react","Table","color","selectable","Body","map","notification","index","Row","key","style","cursor","onClick","customerId","Cell","username","collapsing","Label","circular","count","Loader","active","inline","size","Message","error","header","content","errorMessages","client_default","a","topics","onMessage","message","onConnect","clearTimeout","ref","Redirect","to","push","renderNotifications","connect","dispatch","onSuccess","onError","customerSchema","customers","retrieveCustomers","metadataNormalizer","offset","limit","retrieveCustomer","updateCustomer","networkHelpers","handleError","_handleError","Object","asyncToGenerator","regenerator_default","mark","_callee","err","wrap","_context","prev","next","stop","_x","_x2","apply","arguments","createCustomer","_handleError2","_callee2","_context2","_x3","_x4","requestPOST","body","headers","Accept","X-Auth-Token","localStorage","getItem","Content-Type","JSON","stringify","resetCustomers","getAllCustomers","getCustomer","getResourceById","request","isRetrievingCustomers","isPerforming","getCustomersMetadata","getMetadata","isUpdatingCustomer","Customers","filter","activeFilter","_this","loadCustomers","onChange","event","value","onSubmit","loadPreviousPage","metadata","newOffset","loadNextPage","customer","customerName","firstname","lastname","startIndex","toLowerCase","indexOf","endIndex","substring","isFirstPage","isLastPage","Grid","columns","Column","Form","flexDirection","flex","Input","placeholder","fluid","action","autoFocus","Button","type","loading","primary","Icon","floated","as","Link","celled","Header","HeaderCell","renderCustomerName","email","streetAddress","postalCode","city","Footer","Math","min","colSpan","Menu","pagination","Item","icon","disabled","renderCustomers","query","Segment","Home_Notifications","Home_Customers","usersSchema","signupUser","loginUser","context","Map","NewCustomer","isCreatingCustomer","redirectToOverview","password","birthday","phoneNumber","formError","handleChange","e","_ref","defineProperty","handleSubmit","token","sent","setItem","t0","response","json","then","status","errorFields","errors","field","get","defaultMessage","react_default","createElement","label","includes","_this$state2","hasEmptyFields","hasError","Breadcrumb","fontSize","marginTop","paddingTop","Section","link","Divider","Group","widths","renderTextField","List","items","Component","Promise","resolve","reject","users","interactionLogSchema","interactionlogs","retrieveInteractionLog","acknowledgeInteractions","resetInteractionLogs","getInteractionLog","isRetrievingInteractionLog","showOldAddresses","handleClick","moveHistory","Content","Description","Accordion","Title","bulleted","marginLeft","address","moment","format","href","MessageBubble","className","sentByOperator","GroupSeparator","clearing","section","horizontal","date","fromNow","chatRef","submitMessage","scrollToBottom","chat","scrollTop","scrollHeight","messages","groups","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","group","lastGroup","lastMessage","startDate","endDate","duration","diff","asMinutes","return","groupMessages","groupIndex","Date","messageIndex","_default","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","appendMessage","interactionLog","interactions","interaction","id","didReceiveMessage","ChatRoom_default","text","sendMessage","CustomerDetail","fetchCustomerError","fetchInteractionLogError","match","params","lastAcknowledgedInteractionId","interactionId","_this$props","compact","basic","CustomerProfileView_default","ChatView_default","urlParams","EditCustomer","_updatedCustomer","updatedCustomer","updateFormState","formattedBirthday","styles","siteheader","display","alignItems","logo","height","marginRight","lineHeight","fontWeight","marginBottom","subheader","margin","padding","SiteHeader","Image","src","withRouter","pointing","secondary","location","pathname","reducers","combineReducers","restEasy","store","createStore","compose","applyMiddleware","thunkMiddleware","__REDUX_DEVTOOLS_EXTENSION__","f","configureStore","App","es","BrowserRouter","Container","components_MenuBar","Switch","Route","exact","path","render","Home_default","pages_NewCustomer","pages_CustomerDetail","pages_EditCustomer","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.db82689c.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","// @flow\r\nexport default {\r\n  customerManagementBackendNotAvailable: `The Customer Management backend is currently not\r\n                                    available. Please follow the instructions in the corresponding\r\n                                    README to ensure that it is running and listening on the right\r\n                                    port.`,\r\n}\r\n","// @flow\r\n\r\nfunction getEnvironmentVariable(name: string, defaultValue: string): string {\r\n  return window._env[name] != null\r\n    ? window._env[name]\r\n    : process.env[name] != null\r\n    ? process.env[name]\r\n    : defaultValue\r\n}\r\n\r\nexport const customerSelfServiceBackend = getEnvironmentVariable(\r\n  \"REACT_APP_CUSTOMER_SELF_SERVICE_BACKEND\",\r\n  \"\"\r\n)\r\nexport const customerManagementBackend = getEnvironmentVariable(\r\n  \"REACT_APP_CUSTOMER_MANAGEMENT_BACKEND\",\r\n  \"\"\r\n)\r\n","// @flow\r\n\r\nimport { createResource } from \"@brigad/redux-rest-easy\"\r\nimport { normalize, schema } from \"normalizr\"\r\nimport { customerManagementBackend } from \"../config\"\r\n\r\nconst notificationSchema = new schema.Entity(\"notifications\", undefined, {\r\n  idAttribute: \"customerId\",\r\n})\r\n\r\nconst notifications = createResource(\"notifications\")({\r\n  retrieveNotifications: {\r\n    method: \"GET\",\r\n    url: `${customerManagementBackend}/notifications`,\r\n    normalizer: data => {\r\n      return normalize(data, new schema.Array(notificationSchema))\r\n    },\r\n  },\r\n})\r\n\r\nconst {\r\n  actions: {\r\n    resource: { reset: resetNotifications },\r\n    retrieveNotifications: { perform: retrieveNotifications },\r\n  },\r\n  selectors: {\r\n    resource: { getResource: getAllNotifications },\r\n  },\r\n} = notifications\r\n\r\nexport { retrieveNotifications, getAllNotifications, resetNotifications }\r\n","// @flow\r\n\r\nimport * as React from \"react\"\r\nimport { Fragment } from \"react\"\r\nimport { connect } from \"@brigad/redux-rest-easy\"\r\nimport { Message, Label, Loader } from \"semantic-ui-react\"\r\nimport { Table } from \"semantic-ui-react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport errorMessages from \"../../errorMessages\"\r\nimport SockJsClient from \"react-stomp\"\r\nimport { customerManagementBackend } from \"../../config\"\r\nimport {\r\n  getAllNotifications,\r\n  retrieveNotifications,\r\n  resetNotifications,\r\n} from \"../../redux-rest-easy/notifications\"\r\n\r\ntype ReactRef<ElementType: React.ElementType> = {\r\n  current: null | React.ElementRef<ElementType>,\r\n}\r\n\r\nexport type Props = {\r\n  retrieveNotifications: (onSuccess: () => void, onError: () => void) => void,\r\n  resetNotifications: () => void,\r\n  notifications: Array<Notification>,\r\n}\r\n\r\ntype State = {\r\n  didTimeout: boolean,\r\n  isConnected: boolean,\r\n  notifications: Array<Notification>,\r\n  redirectCustomerId: ?CustomerId,\r\n}\r\n\r\nclass Notifications extends React.Component<Props, State> {\r\n  state = {\r\n    didTimeout: false,\r\n    isConnected: false,\r\n    notifications: [],\r\n    redirectCustomerId: null,\r\n  }\r\n\r\n  timeout: ?TimeoutID\r\n  clientRef: ReactRef<SockJsClient> = React.createRef()\r\n\r\n  componentDidMount() {\r\n    this.props.resetNotifications()\r\n    this.props.retrieveNotifications(() => {}, () => {})\r\n\r\n    this.timeout = setTimeout(() => {\r\n      const client = this.clientRef.current\r\n      if (client) {\r\n        this.setState({ didTimeout: true })\r\n        client.disconnect()\r\n      }\r\n    }, 5000)\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    if (\r\n      this.props.notifications.length > 0 &&\r\n      prevProps.notifications.length === 0\r\n    ) {\r\n      this.setState({ notifications: this.props.notifications })\r\n    }\r\n  }\r\n\r\n  renderNotifications() {\r\n    const { notifications, isConnected, didTimeout } = this.state\r\n    return (\r\n      <Fragment>\r\n        {isConnected &&\r\n          !didTimeout &&\r\n          notifications.length > 0 && (\r\n            <Table color=\"blue\" selectable>\r\n              <Table.Body>\r\n                {notifications.map((notification, index) => (\r\n                  <Table.Row\r\n                    key={index}\r\n                    style={{ cursor: \"pointer\" }}\r\n                    onClick={() => {\r\n                      this.setState({\r\n                        redirectCustomerId: notification.customerId,\r\n                      })\r\n                    }}\r\n                  >\r\n                    <Table.Cell>\r\n                      <b>{notification.username}</b>\r\n                    </Table.Cell>\r\n                    <Table.Cell collapsing>\r\n                      <Label circular color=\"blue\">\r\n                        {notification.count === 1\r\n                          ? \"1 Message\"\r\n                          : `${notification.count} Messages`}\r\n                      </Label>\r\n                    </Table.Cell>\r\n                  </Table.Row>\r\n                ))}\r\n              </Table.Body>\r\n            </Table>\r\n          )}\r\n        {isConnected &&\r\n          !didTimeout &&\r\n          notifications.length === 0 && (\r\n            <p>There are currently no new notifications.</p>\r\n          )}\r\n        {!isConnected && !didTimeout && <Loader active inline size=\"small\" />}\r\n        {!isConnected &&\r\n          didTimeout && (\r\n            <Message\r\n              error\r\n              header=\"Error\"\r\n              content={\r\n                errorMessages.customerManagementBackendNotAvailable\r\n              }\r\n            />\r\n          )}\r\n        <SockJsClient\r\n          url={`${customerManagementBackend}/ws`}\r\n          topics={[\"/topic/notifications\"]}\r\n          onMessage={message => {\r\n            this.setState({ notifications: message })\r\n          }}\r\n          onConnect={() => {\r\n            if (this.timeout) {\r\n              clearTimeout(this.timeout)\r\n            }\r\n            this.setState({ isConnected: true })\r\n          }}\r\n          ref={this.clientRef}\r\n        />\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { redirectCustomerId } = this.state\r\n\r\n    if (redirectCustomerId != null) {\r\n      return <Redirect to={`/customers/${redirectCustomerId}`} push />\r\n    }\r\n\r\n    return this.renderNotifications()\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => ({\r\n  notifications: getAllNotifications(state),\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    retrieveNotifications: (onSuccess, onError) => {\r\n      dispatch(retrieveNotifications({ onSuccess, onError }))\r\n    },\r\n    resetNotifications: () => dispatch(resetNotifications()),\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Notifications)\r\n","// @flow\r\n\r\nimport { createResource } from \"@brigad/redux-rest-easy\"\r\nimport { normalize, schema } from \"normalizr\"\r\nimport {\r\n  customerManagementBackend,\r\n  customerSelfServiceBackend,\r\n} from \"../config\"\r\n\r\nconst customerSchema = new schema.Entity(\"customers\", undefined, {\r\n  idAttribute: \"customerId\",\r\n})\r\n\r\nconst customers = createResource(\"customers\")({\r\n  retrieveCustomers: {\r\n    method: \"GET\",\r\n    url: `${customerManagementBackend}/customers`,\r\n    normalizer: data => {\r\n      const normalizedData = normalize(data, {\r\n        customers: [customerSchema],\r\n      })\r\n      return normalizedData\r\n    },\r\n    metadataNormalizer: data => {\r\n      return { offset: data.offset, limit: data.limit, size: data.size }\r\n    },\r\n  },\r\n  retrieveCustomer: {\r\n    method: \"GET\",\r\n    url: `${customerManagementBackend}/customers/:customerId`,\r\n    normalizer: data => normalize(data, customerSchema),\r\n  },\r\n  updateCustomer: {\r\n    method: \"PUT\",\r\n    url: `${customerManagementBackend}/customers/:customerId`,\r\n    normalizer: data => {\r\n      return normalize(data, customerSchema)\r\n    },\r\n    networkHelpers: {\r\n      handleError: async (err, dispatch) => {\r\n        // Overrides the default error handler so that we don't consume\r\n        // the response body more than once.\r\n      },\r\n    },\r\n  },\r\n  createCustomer: {\r\n    method: \"POST\",\r\n    url: `${customerSelfServiceBackend}/customers`,\r\n    normalizer: data => {\r\n      return normalize(data, customerSchema)\r\n    },\r\n    networkHelpers: {\r\n      handleError: async (err, dispatch) => {\r\n        // Overrides the default error handler so that we don't consume\r\n        // the response body more than once.\r\n      },\r\n      requestPOST(body) {\r\n        return {\r\n          method: \"POST\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"X-Auth-Token\": `${localStorage.getItem(\"token\") || \"\"}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(body),\r\n        }\r\n      },\r\n    },\r\n  },\r\n})\r\n\r\nconst {\r\n  actions: {\r\n    resource: { reset: resetCustomers },\r\n    retrieveCustomers: { perform: retrieveCustomers },\r\n    retrieveCustomer: { perform: retrieveCustomer },\r\n    updateCustomer: { perform: updateCustomer },\r\n    createCustomer: { perform: createCustomer },\r\n  },\r\n  selectors: {\r\n    resource: { getResource: getAllCustomers, getResourceById: getCustomer },\r\n    retrieveCustomers: {\r\n      request: {\r\n        isPerforming: isRetrievingCustomers,\r\n        getMetadata: getCustomersMetadata,\r\n      },\r\n    },\r\n    retrieveCustomer: {\r\n      request: { isPerforming: isRetrievingCustomer },\r\n    },\r\n    updateCustomer: {\r\n      request: { isPerforming: isUpdatingCustomer },\r\n    },\r\n  },\r\n} = customers\r\n\r\nexport {\r\n  retrieveCustomer,\r\n  isRetrievingCustomer,\r\n  retrieveCustomers,\r\n  isRetrievingCustomers,\r\n  getCustomersMetadata,\r\n  getAllCustomers,\r\n  getCustomer,\r\n  resetCustomers,\r\n  updateCustomer,\r\n  isUpdatingCustomer,\r\n  createCustomer,\r\n}\r\n","// @flow\r\n\r\nimport * as React from \"react\"\r\nimport { Fragment } from \"react\"\r\nimport { connect } from \"@brigad/redux-rest-easy\"\r\nimport { Input, Form, Button, Message, Grid } from \"semantic-ui-react\"\r\nimport {\r\n  retrieveCustomers,\r\n  isRetrievingCustomers,\r\n  getCustomersMetadata,\r\n  getAllCustomers,\r\n  resetCustomers,\r\n} from \"../../redux-rest-easy/customers\"\r\nimport { Icon, Menu, Table } from \"semantic-ui-react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport errorMessages from \"../../errorMessages\"\r\n\r\nexport type Props = {\r\n  retrieveCustomers: (\r\n    filter: string,\r\n    offset: number,\r\n    onSuccess: () => void,\r\n    onError: () => void\r\n  ) => void,\r\n  isRetrievingCustomers: boolean,\r\n  customers: Array<Customer>,\r\n  metadata: { offset: ?number, limit: ?number, size: ?number },\r\n  resetCustomers: () => void,\r\n}\r\n\r\ntype State = {\r\n  error: boolean,\r\n  filter: string,\r\n  activeFilter: string,\r\n}\r\n\r\nclass Customers extends React.Component<Props, State> {\r\n  state = {\r\n    error: false,\r\n    filter: \"\",\r\n    activeFilter: \"\",\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadCustomers(0)\r\n  }\r\n\r\n  onSuccess = () => {\r\n    this.setState({ error: false })\r\n  }\r\n\r\n  onError = () => {\r\n    this.setState({ error: true })\r\n  }\r\n\r\n  loadCustomers = offset => {\r\n    this.props.resetCustomers()\r\n    this.props.retrieveCustomers(\r\n      this.state.filter,\r\n      offset,\r\n      this.onSuccess,\r\n      this.onError\r\n    )\r\n    this.setState({ activeFilter: this.state.filter })\r\n  }\r\n\r\n  onChange = (event, data) => {\r\n    this.setState({ filter: data.value })\r\n  }\r\n\r\n  onSubmit = () => {\r\n    this.loadCustomers(0)\r\n  }\r\n\r\n  loadPreviousPage = () => {\r\n    const metadata = this.props.metadata\r\n    const offset = metadata.offset || 0\r\n    const limit = metadata.limit || 0\r\n    const newOffset = offset - limit\r\n    if (newOffset >= 0) {\r\n      this.loadCustomers(newOffset)\r\n    }\r\n  }\r\n\r\n  loadNextPage = () => {\r\n    const metadata = this.props.metadata\r\n    const offset = metadata.offset || 0\r\n    const limit = metadata.limit || 0\r\n    const size = metadata.size || 0\r\n    const newOffset = offset + limit\r\n    if (newOffset < size) {\r\n      this.loadCustomers(newOffset)\r\n    }\r\n  }\r\n\r\n  renderCustomerName(customer: Customer) {\r\n    const customerName = `${customer.firstname} ${customer.lastname}`\r\n    if (this.state.activeFilter === \"\") {\r\n      return customerName\r\n    }\r\n\r\n    const startIndex = customerName\r\n      .toLowerCase()\r\n      .indexOf(this.state.activeFilter.toLowerCase())\r\n    if (startIndex === -1) {\r\n      return customerName\r\n    }\r\n\r\n    const endIndex = startIndex + this.state.activeFilter.length\r\n    return (\r\n      <span>\r\n        {customerName.substring(0, startIndex)}\r\n        <b>{customerName.substring(startIndex, endIndex)}</b>\r\n        {customerName.substring(endIndex)}\r\n      </span>\r\n    )\r\n  }\r\n\r\n  renderCustomers() {\r\n    const metadata = this.props.metadata\r\n    const offset = metadata.offset || 0\r\n    const limit = metadata.limit || 0\r\n    const size = metadata.size || 0\r\n    const isFirstPage = offset === 0\r\n    const isLastPage = offset + limit >= size\r\n\r\n    return (\r\n      <Fragment>\r\n        <Grid columns={2}>\r\n          <Grid.Row>\r\n            <Grid.Column>\r\n              <Form\r\n                onSubmit={this.onSubmit}\r\n                style={{ flexDirection: \"row\", flex: 1 }}\r\n              >\r\n                <Input\r\n                  placeholder=\"Search...\"\r\n                  fluid\r\n                  onChange={this.onChange}\r\n                  action\r\n                  autoFocus\r\n                >\r\n                  <input />\r\n                  <Button\r\n                    type=\"submit\"\r\n                    loading={this.props.isRetrievingCustomers}\r\n                    primary\r\n                  >\r\n                    <Icon name=\"search\" /> Search\r\n                  </Button>\r\n                </Input>\r\n              </Form>\r\n            </Grid.Column>\r\n            <Grid.Column>\r\n              <Button\r\n                color=\"green\"\r\n                floated=\"right\"\r\n                as={Link}\r\n                to=\"/customers/new\"\r\n              >\r\n                <Icon name=\"add\" />\r\n                New Customer\r\n              </Button>\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n        </Grid>\r\n\r\n        <Table celled>\r\n          <Table.Header>\r\n            <Table.Row>\r\n              <Table.HeaderCell>Name</Table.HeaderCell>\r\n              <Table.HeaderCell>Email</Table.HeaderCell>\r\n              <Table.HeaderCell>Address</Table.HeaderCell>\r\n              <Table.HeaderCell />\r\n            </Table.Row>\r\n          </Table.Header>\r\n\r\n          <Table.Body>\r\n            {this.props.customers.map(customer => {\r\n              return (\r\n                <Table.Row key={customer.customerId}>\r\n                  <Table.Cell>{this.renderCustomerName(customer)}</Table.Cell>\r\n                  <Table.Cell>{customer.email}</Table.Cell>\r\n                  <Table.Cell>{`${customer.streetAddress}, ${\r\n                    customer.postalCode\r\n                  } ${customer.city}`}</Table.Cell>\r\n                  <Table.Cell>\r\n                    <Button as={Link} to={`/customers/${customer.customerId}`}>\r\n                      Show\r\n                    </Button>\r\n                  </Table.Cell>\r\n                </Table.Row>\r\n              )\r\n            })}\r\n          </Table.Body>\r\n\r\n          <Table.Footer>\r\n            <Table.Row>\r\n              <Table.HeaderCell>\r\n                {offset + 1} - {Math.min(offset + limit, size)} of {size}\r\n              </Table.HeaderCell>\r\n              <Table.HeaderCell colSpan=\"3\">\r\n                <Menu floated=\"right\" pagination>\r\n                  <Menu.Item\r\n                    as=\"a\"\r\n                    icon\r\n                    onClick={this.loadPreviousPage}\r\n                    disabled={isFirstPage}\r\n                  >\r\n                    <Icon name=\"chevron left\" />\r\n                  </Menu.Item>\r\n                  <Menu.Item\r\n                    as=\"a\"\r\n                    icon\r\n                    onClick={this.loadNextPage}\r\n                    disabled={isLastPage}\r\n                  >\r\n                    <Icon name=\"chevron right\" />\r\n                  </Menu.Item>\r\n                </Menu>\r\n              </Table.HeaderCell>\r\n            </Table.Row>\r\n          </Table.Footer>\r\n        </Table>\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { error } = this.state\r\n\r\n    return (\r\n      <Fragment>\r\n        {error && (\r\n          <Message\r\n            error\r\n            header=\"Error\"\r\n            content={errorMessages.customerManagementBackendNotAvailable}\r\n          />\r\n        )}\r\n        {!error && this.renderCustomers()}\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => ({\r\n  customers: getAllCustomers(state),\r\n  metadata: getCustomersMetadata(state, props),\r\n  isRetrievingCustomers: isRetrievingCustomers(state, props),\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    retrieveCustomers: (filter, offset, onSuccess, onError) =>\r\n      dispatch(\r\n        retrieveCustomers({ onSuccess, onError, query: { filter, offset } })\r\n      ),\r\n    resetCustomers: () => dispatch(resetCustomers()),\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Customers)\r\n","// @flow\r\n\r\nimport * as React from \"react\"\r\nimport { Header, Segment } from \"semantic-ui-react\"\r\nimport Notifications from \"./Notifications\"\r\nimport Customers from \"./Customers\"\r\n\r\nexport type Props = {}\r\n\r\ntype State = {}\r\n\r\nexport default class extends React.Component<Props, State> {\r\n  state = {}\r\n\r\n  render() {\r\n    return (\r\n      <Segment>\r\n        <Header as=\"h3\" content=\"Notifications\" />\r\n        <Notifications />\r\n        <Header as=\"h3\" content=\"Customers\" />\r\n        <Customers />\r\n      </Segment>\r\n    )\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport { createResource } from \"@brigad/redux-rest-easy\"\r\nimport { normalize, schema } from \"normalizr\"\r\nimport { customerSelfServiceBackend } from \"../config\"\r\n\r\nconst usersSchema = new schema.Entity(\"users\", undefined, {\r\n  idAttribute: \"email\",\r\n})\r\n\r\nconst users = createResource(\"users\")({\r\n  signupUser: {\r\n    method: \"POST\",\r\n    url: `${customerSelfServiceBackend}/auth/signup`,\r\n    normalizer: data => {\r\n      return normalize(data, usersSchema)\r\n    },\r\n    networkHelpers: {\r\n      handleError: async (err, dispatch) => {\r\n        // Overrides the default error handler so that we don't consume\r\n        // the response body more than once.\r\n      },\r\n    },\r\n  },\r\n  loginUser: {\r\n    method: \"POST\",\r\n    url: `${customerSelfServiceBackend}/auth`,\r\n    normalizer: data => {\r\n      return normalize(data, usersSchema)\r\n    },\r\n    networkHelpers: {\r\n      handleError: async (err, dispatch) => {\r\n        // Overrides the default error handler so that we don't consume\r\n        // the response body more than once.\r\n      },\r\n    },\r\n  },\r\n})\r\n\r\nconst {\r\n  actions: {\r\n    signupUser: { perform: signupUser },\r\n    loginUser: { perform: loginUser },\r\n  },\r\n} = users\r\n\r\nexport { signupUser, loginUser }\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport {\r\n  Breadcrumb,\r\n  Segment,\r\n  Button,\r\n  Form,\r\n  Message,\r\n  Header,\r\n} from \"semantic-ui-react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { signupUser, loginUser } from \"../../redux-rest-easy/users\"\r\nimport { createCustomer } from \"../../redux-rest-easy/customers\"\r\nimport { connect } from \"@brigad/redux-rest-easy\"\r\nimport errorMessages from \"../../errorMessages\"\r\n\r\nfunction extractFormError(error, context: Map<string, string>): ?FormError {\r\n  if (error.status === 409) {\r\n    return {\r\n      errorFields: [\"email\"],\r\n      errorMessages: [\"This email address has already been taken.\"],\r\n    }\r\n  } else if (error.errors != null) {\r\n    const errorFields = error.errors.map(error => error.field)\r\n    const errorMessages = error.errors.map(\r\n      error =>\r\n        `${context.get(error.field) || error.field} ${error.defaultMessage}`\r\n    )\r\n\r\n    return {\r\n      errorFields,\r\n      errorMessages,\r\n    }\r\n  } else {\r\n    return {\r\n      errorFields: [],\r\n      errorMessages: [errorMessages.customerManagementBackendNotAvailable],\r\n    }\r\n  }\r\n}\r\n\r\nexport type Props = {\r\n  signupUser: (email: string, password: string) => Promise<void>,\r\n  loginUser: (email: string, password: string) => Promise<string>,\r\n  createCustomer: (\r\n    firstname: string,\r\n    lastname: string,\r\n    birthday: string,\r\n    streetAddress: string,\r\n    postalCode: string,\r\n    city: string,\r\n    phoneNumber: string\r\n  ) => Promise<void>,\r\n}\r\n\r\nconst emailKey = \"email\"\r\nconst passwordKey = \"password\"\r\nconst firstnameKey = \"firstname\"\r\nconst lastnameKey = \"lastname\"\r\nconst birthdayKey = \"birthday\"\r\nconst streetAddressKey = \"streetAddress\"\r\nconst postalCodeKey = \"postalCode\"\r\nconst cityKey = \"city\"\r\nconst phoneNumberKey = \"phoneNumber\"\r\n\r\nconst context = new Map([\r\n  [emailKey, \"Email Address\"],\r\n  [passwordKey, \"Password\"],\r\n  [firstnameKey, \"First Name\"],\r\n  [lastnameKey, \"Last Name\"],\r\n  [birthdayKey, \"Date of Birth\"],\r\n  [streetAddressKey, \"Street Address\"],\r\n  [postalCodeKey, \"Postal Code\"],\r\n  [cityKey, \"City\"],\r\n  [phoneNumberKey, \"Phone Number\"],\r\n])\r\n\r\ntype State = {\r\n  isCreatingCustomer: boolean,\r\n  redirectToOverview: boolean,\r\n  email: string,\r\n  password: string,\r\n  firstname: string,\r\n  lastname: string,\r\n  birthday: string,\r\n  streetAddress: string,\r\n  postalCode: string,\r\n  city: string,\r\n  phoneNumber: string,\r\n  formError: ?FormError,\r\n}\r\n\r\nclass NewCustomer extends React.Component<Props, State> {\r\n  state = {\r\n    isCreatingCustomer: false,\r\n    redirectToOverview: false,\r\n    email: \"\",\r\n    password: \"\",\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    birthday: \"\",\r\n    streetAddress: \"\",\r\n    postalCode: \"\",\r\n    city: \"\",\r\n    phoneNumber: \"\",\r\n    formError: null,\r\n  }\r\n\r\n  handleChange = (\r\n    e: Event,\r\n    { name, value }: { name: string, value: string }\r\n  ) => {\r\n    this.setState({ [name]: value })\r\n  }\r\n\r\n  handleSubmit = async () => {\r\n    const {\r\n      email,\r\n      password,\r\n      firstname,\r\n      lastname,\r\n      birthday,\r\n      streetAddress,\r\n      postalCode,\r\n      city,\r\n      phoneNumber,\r\n    } = this.state\r\n\r\n    try {\r\n      this.setState({ isCreatingCustomer: true })\r\n      await this.props.signupUser(email, password)\r\n      const token = await this.props.loginUser(email, password)\r\n      localStorage.setItem(\"token\", token)\r\n      await this.props.createCustomer(\r\n        firstname,\r\n        lastname,\r\n        birthday,\r\n        streetAddress,\r\n        postalCode,\r\n        city,\r\n        phoneNumber\r\n      )\r\n      this.setState({ isCreatingCustomer: false, redirectToOverview: true })\r\n    } catch (error) {\r\n      this.setState({ isCreatingCustomer: false })\r\n\r\n      error.response.json().then(response => {\r\n        const formError = extractFormError(response, context)\r\n        this.setState({ formError })\r\n      })\r\n    }\r\n  }\r\n\r\n  renderTextField(\r\n    key: string,\r\n    value: string,\r\n    errorFields: Array<string>,\r\n    type: string = \"text\"\r\n  ) {\r\n    return (\r\n      <Form.Input\r\n        label={context.get(key)}\r\n        placeholder={context.get(key)}\r\n        type={type}\r\n        name={key}\r\n        value={value}\r\n        onChange={this.handleChange}\r\n        error={errorFields.includes(key)}\r\n      />\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      isCreatingCustomer,\r\n      email,\r\n      password,\r\n      firstname,\r\n      lastname,\r\n      birthday,\r\n      streetAddress,\r\n      postalCode,\r\n      city,\r\n      phoneNumber,\r\n      formError,\r\n    } = this.state\r\n\r\n    const hasEmptyFields =\r\n      !email ||\r\n      !password ||\r\n      !firstname ||\r\n      !lastname ||\r\n      !birthday ||\r\n      !streetAddress ||\r\n      !postalCode ||\r\n      !city ||\r\n      !phoneNumber\r\n    const hasError = !!formError\r\n    const errorFields = formError ? formError.errorFields : []\r\n    const errorMessages = formError ? formError.errorMessages : []\r\n\r\n    if (this.state.redirectToOverview) {\r\n      return <Redirect to=\"/\" push />\r\n    } else {\r\n      return (\r\n        <Segment>\r\n          <Breadcrumb\r\n            style={{\r\n              fontSize: \"1.28571429rem\",\r\n              marginTop: 0,\r\n              paddingTop: 0,\r\n            }}\r\n          >\r\n            <Breadcrumb.Section link as={Link} to=\"/\">\r\n              Customers\r\n            </Breadcrumb.Section>\r\n            <Breadcrumb.Divider icon=\"right angle\" />\r\n            <Breadcrumb.Section>New Customer</Breadcrumb.Section>\r\n          </Breadcrumb>\r\n          <br />\r\n          <br />\r\n\r\n          <Form onSubmit={this.handleSubmit} error={hasError}>\r\n            <Header>Login Credentials</Header>\r\n            <Form.Group widths=\"equal\">\r\n              {this.renderTextField(emailKey, email, errorFields)}\r\n              {this.renderTextField(\r\n                passwordKey,\r\n                password,\r\n                errorFields,\r\n                \"password\"\r\n              )}\r\n            </Form.Group>\r\n\r\n            <Header>Customer Profile</Header>\r\n            <Form.Group widths=\"equal\">\r\n              {this.renderTextField(firstnameKey, firstname, errorFields)}\r\n              {this.renderTextField(lastnameKey, lastname, errorFields)}\r\n            </Form.Group>\r\n\r\n            {this.renderTextField(birthdayKey, birthday, errorFields, \"date\")}\r\n            {this.renderTextField(streetAddressKey, streetAddress, errorFields)}\r\n\r\n            <Form.Group widths=\"equal\">\r\n              {this.renderTextField(postalCodeKey, postalCode, errorFields)}\r\n              {this.renderTextField(cityKey, city, errorFields)}\r\n            </Form.Group>\r\n\r\n            {this.renderTextField(phoneNumberKey, phoneNumber, errorFields)}\r\n\r\n            <Button\r\n              fluid\r\n              color=\"blue\"\r\n              disabled={hasEmptyFields || isCreatingCustomer}\r\n              loading={isCreatingCustomer}\r\n            >\r\n              Create Customer\r\n            </Button>\r\n\r\n            <Message error>\r\n              <Message.Header>Update failed</Message.Header>\r\n              <Message.List items={errorMessages} />\r\n            </Message>\r\n          </Form>\r\n        </Segment>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  return {}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  signupUser: (email, password) =>\r\n    new Promise((resolve, reject) => {\r\n      dispatch(\r\n        signupUser({\r\n          onSuccess: resolve,\r\n          onError: reject,\r\n          body: { email, password },\r\n        })\r\n      )\r\n    }),\r\n  loginUser: (email, password) =>\r\n    new Promise((resolve, reject) => {\r\n      dispatch(\r\n        loginUser({\r\n          onSuccess: data => resolve(data.users[email].token),\r\n          onError: reject,\r\n          body: { email, password },\r\n        })\r\n      )\r\n    }),\r\n  createCustomer: (\r\n    firstname,\r\n    lastname,\r\n    birthday,\r\n    streetAddress,\r\n    postalCode,\r\n    city,\r\n    phoneNumber\r\n  ) =>\r\n    new Promise((resolve, reject) => {\r\n      dispatch(\r\n        createCustomer({\r\n          onSuccess: resolve,\r\n          onError: reject,\r\n          body: {\r\n            firstname,\r\n            lastname,\r\n            birthday,\r\n            streetAddress,\r\n            postalCode,\r\n            city,\r\n            phoneNumber,\r\n          },\r\n        })\r\n      )\r\n    }),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(NewCustomer)\r\n","// @flow\r\n\r\nimport { createResource } from \"@brigad/redux-rest-easy\"\r\nimport { normalize, schema } from \"normalizr\"\r\nimport { customerManagementBackend } from \"../config\"\r\n\r\nconst interactionLogSchema = new schema.Entity(\"interactionlogs\", undefined, {\r\n  idAttribute: \"customerId\",\r\n})\r\n\r\nconst interactionlogs = createResource(\"interactionlogs\")({\r\n  retrieveInteractionLog: {\r\n    method: \"GET\",\r\n    url: `${customerManagementBackend}/interaction-logs/:customerId`,\r\n    normalizer: data => normalize(data, interactionLogSchema),\r\n  },\r\n  acknowledgeInteractions: {\r\n    method: \"PATCH\",\r\n    url: `${customerManagementBackend}/interaction-logs/:customerId`,\r\n    normalizer: data => normalize(data, interactionLogSchema),\r\n  },\r\n})\r\n\r\nconst {\r\n  actions: {\r\n    resource: { reset: resetInteractionLogs },\r\n    retrieveInteractionLog: { perform: retrieveInteractionLog },\r\n    acknowledgeInteractions: { perform: acknowledgeInteractions },\r\n  },\r\n  selectors: {\r\n    resource: { getResourceById: getInteractionLog },\r\n    retrieveInteractionLog: {\r\n      request: { isPerforming: isRetrievingInteractionLog },\r\n    },\r\n  },\r\n} = interactionlogs\r\n\r\nexport {\r\n  retrieveInteractionLog,\r\n  isRetrievingInteractionLog,\r\n  getInteractionLog,\r\n  resetInteractionLogs,\r\n  acknowledgeInteractions,\r\n}\r\n","// @flow\r\n\r\nimport * as React from \"react\"\r\nimport { Fragment } from \"react\"\r\nimport { List, Accordion, Icon, Grid } from \"semantic-ui-react\"\r\nimport moment from \"moment\"\r\n\r\nexport type Props = {\r\n  customer: Customer,\r\n}\r\n\r\ntype State = {\r\n  showOldAddresses: boolean,\r\n}\r\n\r\nexport default class extends React.Component<Props, State> {\r\n  state = {\r\n    showOldAddresses: false,\r\n  }\r\n\r\n  handleClick = () => {\r\n    const { showOldAddresses } = this.state\r\n    this.setState({ showOldAddresses: !showOldAddresses })\r\n  }\r\n\r\n  render() {\r\n    const { showOldAddresses } = this.state\r\n    const { customer } = this.props\r\n    const {\r\n      firstname,\r\n      lastname,\r\n      streetAddress,\r\n      birthday,\r\n      postalCode,\r\n      city,\r\n      email,\r\n      phoneNumber,\r\n      moveHistory,\r\n    } = customer\r\n    return (\r\n      <Fragment>\r\n        <Grid columns=\"two\">\r\n          <Grid.Row>\r\n            <Grid.Column>\r\n              <List>\r\n                <List.Item>\r\n                  <List.Icon name=\"user\" />\r\n                  <List.Content>\r\n                    <List.Header>Name</List.Header>\r\n                    <List.Description>\r\n                      {firstname} {lastname}\r\n                    </List.Description>\r\n                  </List.Content>\r\n                </List.Item>\r\n\r\n                <List.Item>\r\n                  <List.Icon name=\"marker\" />\r\n                  <List.Content>\r\n                    <List.Header>Address</List.Header>\r\n                    <List.Description>\r\n                      {streetAddress}, {postalCode} {city}\r\n                    </List.Description>\r\n                  </List.Content>\r\n                </List.Item>\r\n\r\n                <List.Item>\r\n                  {moveHistory.length > 0 && (\r\n                    <Accordion>\r\n                      <Accordion.Title\r\n                        active={showOldAddresses}\r\n                        index={0}\r\n                        onClick={this.handleClick}\r\n                      >\r\n                        <Icon name=\"dropdown\" />\r\n                        Old Addresses\r\n                      </Accordion.Title>\r\n                      <Accordion.Content active={showOldAddresses}>\r\n                        <List bulleted style={{ marginLeft: 40 }}>\r\n                          {moveHistory.map((address, index) => (\r\n                            <List.Item key={`${index}`}>\r\n                              {address.streetAddress}, {address.postalCode}{\" \"}\r\n                              {address.city}\r\n                            </List.Item>\r\n                          ))}\r\n                        </List>\r\n                      </Accordion.Content>\r\n                    </Accordion>\r\n                  )}\r\n                </List.Item>\r\n              </List>\r\n            </Grid.Column>\r\n            <Grid.Column>\r\n              <List>\r\n                <List.Item>\r\n                  <List.Icon name=\"calendar\" />\r\n                  <List.Content>\r\n                    <List.Header>Date of Birth</List.Header>\r\n                    <List.Description>\r\n                      {moment(birthday).format(\"MMMM Do YYYY\")}\r\n                    </List.Description>\r\n                  </List.Content>\r\n                </List.Item>\r\n\r\n                <List.Item>\r\n                  <List.Icon name=\"mail\" />\r\n                  <List.Content>\r\n                    <List.Header>Email Address</List.Header>\r\n                    <List.Description>\r\n                      <a href={`mailto:${email}`}>{email}</a>\r\n                    </List.Description>\r\n                  </List.Content>\r\n                </List.Item>\r\n                <List.Item>\r\n                  <List.Icon name=\"phone\" />\r\n                  <List.Content>\r\n                    <List.Header>Phone Number</List.Header>\r\n                    <List.Description>{phoneNumber}</List.Description>\r\n                  </List.Content>\r\n                </List.Item>\r\n              </List>\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n        </Grid>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport React from \"react\"\r\n\r\nexport type Props = {\r\n  message: MessageDto,\r\n}\r\n\r\nexport default (props: Props) => (\r\n  <li className={`chat ${props.message.sentByOperator ? \"right\" : \"left\"}`}>\r\n    {props.message.content}\r\n  </li>\r\n)\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport { Divider } from \"semantic-ui-react\"\r\nimport moment from \"moment\"\r\n\r\nexport type Props = {\r\n  date: Date,\r\n}\r\n\r\nexport default (props: Props) => (\r\n  <li className=\"groupSeparator\">\r\n    <Divider clearing section horizontal>\r\n      {moment(props.date).fromNow()}\r\n    </Divider>\r\n  </li>\r\n)\r\n","// @flow\r\n\r\n// Adapted from https://github.com/WigoHunter/react-chatapp\r\n\r\nimport * as React from \"react\"\r\nimport { Fragment } from \"react\"\r\nimport \"./chatroom.css\"\r\nimport MessageBubble from \"./MessageBubble\"\r\nimport { Input, Button, Form } from \"semantic-ui-react\"\r\nimport GroupSeparator from \"./GroupSeparator\"\r\nimport moment from \"moment\"\r\n\r\ntype ReactRef<ElementType: React.ElementType> = {\r\n  current: null | React.ElementRef<ElementType>,\r\n}\r\n\r\nexport type Props = {\r\n  messages: Array<MessageDto>,\r\n  onSubmit: string => void,\r\n}\r\n\r\ntype State = {\r\n  content: string,\r\n}\r\n\r\nexport default class extends React.Component<Props, State> {\r\n  chatRef: ReactRef<\"ul\"> = React.createRef()\r\n\r\n  state = {\r\n    content: \"\",\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.scrollToBottom()\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.scrollToBottom()\r\n  }\r\n\r\n  scrollToBottom() {\r\n    const chat = this.chatRef.current\r\n    if (chat) {\r\n      chat.scrollTop = chat.scrollHeight\r\n    }\r\n  }\r\n\r\n  handleChange = (e: Event, { value }: { value: string }) => {\r\n    this.setState({ content: value })\r\n  }\r\n\r\n  submitMessage = () => {\r\n    const { content } = this.state\r\n    if (content !== \"\") {\r\n      this.props.onSubmit(content)\r\n      this.setState({ content: \"\" })\r\n    }\r\n  }\r\n\r\n  groupMessages(messages: Array<MessageDto>): Array<Array<MessageDto>> {\r\n    const groups: Array<Array<MessageDto>> = []\r\n    for (const message of messages) {\r\n      let group: Array<MessageDto>\r\n      if (groups.length === 0) {\r\n        group = []\r\n        groups.push(group)\r\n      } else {\r\n        const lastGroup = groups[groups.length - 1]\r\n        const lastMessage = lastGroup[lastGroup.length - 1]\r\n        const startDate = moment(lastMessage.date)\r\n        const endDate = moment(message.date)\r\n        const minutes = moment.duration(endDate.diff(startDate)).asMinutes()\r\n        if (minutes > 10) {\r\n          group = []\r\n          groups.push(group)\r\n        } else {\r\n          group = lastGroup\r\n        }\r\n      }\r\n\r\n      group.push(message)\r\n    }\r\n    return groups\r\n  }\r\n\r\n  render() {\r\n    const { content } = this.state\r\n    const { messages } = this.props\r\n    const groups = this.groupMessages(messages)\r\n\r\n    return (\r\n      <div className=\"chatroom\">\r\n        <ul className=\"chats\" ref={this.chatRef}>\r\n          {groups.map((group, groupIndex) => (\r\n            <Fragment key={`group-${groupIndex}`}>\r\n              {group[0].date != null && (\r\n                <GroupSeparator date={new Date(group[0].date)} />\r\n              )}\r\n              {group.map((message, messageIndex) => (\r\n                <MessageBubble\r\n                  message={message}\r\n                  key={`message-${groupIndex}-${messageIndex}`}\r\n                />\r\n              ))}\r\n            </Fragment>\r\n          ))}\r\n          {messages.length === 0 && (\r\n            <p className=\"nomessages\">\r\n              There are no messages yet.\r\n              <br /> Send a message to start a conversation.\r\n            </p>\r\n          )}\r\n        </ul>\r\n        <Form onSubmit={this.submitMessage}>\r\n          <Input\r\n            fluid\r\n            type=\"text\"\r\n            placeholder=\"Enter a Message\"\r\n            action\r\n            value={content}\r\n            onChange={this.handleChange}\r\n            autoFocus\r\n          >\r\n            <input />\r\n            <Button type=\"submit\" color=\"green\">\r\n              Send\r\n            </Button>\r\n          </Input>\r\n        </Form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport { Fragment } from \"react\"\r\nimport * as React from \"react\"\r\nimport SockJsClient from \"react-stomp\"\r\nimport ChatRoom from \"../../components/ChatRoom\"\r\nimport { customerManagementBackend } from \"../../config\"\r\nimport { Message, Loader } from \"semantic-ui-react\"\r\nimport errorMessages from \"../../errorMessages\"\r\n\r\ntype ReactRef<ElementType: React.ElementType> = {\r\n  current: null | React.ElementRef<ElementType>,\r\n}\r\n\r\nexport type Props = {\r\n  customer: Customer,\r\n  interactionLog: InteractionLog,\r\n  didReceiveMessage: MessageDto => void,\r\n}\r\n\r\ntype State = {\r\n  didTimeout: boolean,\r\n  isConnected: boolean,\r\n  messages: Array<MessageDto>,\r\n}\r\n\r\nexport default class extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props)\r\n\r\n    const { customer, interactionLog } = props\r\n    const interactions = interactionLog.interactions\r\n    const messages: Array<MessageDto> = interactions.map(interaction => ({\r\n      id: interaction.id,\r\n      username: interactionLog.username,\r\n      content: interaction.content,\r\n      customerId: customer.customerId,\r\n      date: interaction.date,\r\n      sentByOperator: interaction.sentByOperator,\r\n    }))\r\n\r\n    this.state = {\r\n      didTimeout: false,\r\n      isConnected: false,\r\n      messages,\r\n    }\r\n  }\r\n\r\n  timeout: ?TimeoutID\r\n  clientRef: ReactRef<SockJsClient> = React.createRef()\r\n\r\n  componentDidMount() {\r\n    this.timeout = setTimeout(() => {\r\n      const client = this.clientRef.current\r\n      if (client) {\r\n        this.setState({ didTimeout: true })\r\n        client.disconnect()\r\n      }\r\n    }, 5000)\r\n  }\r\n\r\n  appendMessage = (message: MessageDto) => {\r\n    const messages = this.state.messages.concat([message])\r\n    this.setState({ messages })\r\n  }\r\n\r\n  render() {\r\n    const { messages, isConnected, didTimeout } = this.state\r\n    const { customer } = this.props\r\n\r\n    return (\r\n      <Fragment>\r\n        <SockJsClient\r\n          url={`${customerManagementBackend}/ws`}\r\n          topics={[\"/topic/messages\"]}\r\n          onMessage={message => {\r\n            this.props.didReceiveMessage(message)\r\n            if (customer.customerId === message.customerId) {\r\n              this.appendMessage(message)\r\n            }\r\n          }}\r\n          onConnect={() => {\r\n            if (this.timeout) {\r\n              clearTimeout(this.timeout)\r\n            }\r\n            this.setState({ isConnected: true })\r\n          }}\r\n          ref={this.clientRef}\r\n        />\r\n        {isConnected &&\r\n          !didTimeout && (\r\n            <ChatRoom\r\n              messages={messages}\r\n              onSubmit={text => {\r\n                const client = this.clientRef.current\r\n                if (client) {\r\n                  const message: MessageDto = {\r\n                    id: null,\r\n                    date: null,\r\n                    username: `${customer.firstname} ${customer.lastname}`,\r\n                    content: text,\r\n                    customerId: customer.customerId,\r\n                    sentByOperator: true,\r\n                  }\r\n                  client.sendMessage(\"/chat/messages\", JSON.stringify(message))\r\n                }\r\n              }}\r\n            />\r\n          )}\r\n        {!isConnected &&\r\n          !didTimeout && (\r\n            <Loader active inline=\"centered\">\r\n              Loading\r\n            </Loader>\r\n          )}\r\n        {!isConnected &&\r\n          didTimeout && (\r\n            <Message\r\n              error\r\n              header=\"Error\"\r\n              content={\r\n                errorMessages.customerManagementBackendNotAvailable\r\n              }\r\n            />\r\n          )}\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport { Fragment } from \"react\"\r\nimport * as React from \"react\"\r\nimport { connect } from \"@brigad/redux-rest-easy\"\r\nimport {\r\n  Header,\r\n  Segment,\r\n  Breadcrumb,\r\n  Message,\r\n  Button,\r\n  Icon,\r\n} from \"semantic-ui-react\"\r\nimport { getCustomer, retrieveCustomer } from \"../../redux-rest-easy/customers\"\r\nimport {\r\n  getInteractionLog,\r\n  retrieveInteractionLog,\r\n  resetInteractionLogs,\r\n  acknowledgeInteractions,\r\n  isRetrievingInteractionLog,\r\n} from \"../../redux-rest-easy/interactionlogs\"\r\nimport { type Match, Link } from \"react-router-dom\"\r\nimport CustomerProfileView from \"./CustomerProfileView\"\r\nimport ChatView from \"./ChatView\"\r\nimport errorMessages from \"../../errorMessages\"\r\n\r\nexport type Props = {\r\n  customer: ?Customer,\r\n  interactionLog: ?InteractionLog,\r\n  retrieveCustomer: (\r\n    customerId: string,\r\n    onSuccess: () => void,\r\n    onError: () => void\r\n  ) => void,\r\n  retrieveInteractionLog: (\r\n    customerId: string,\r\n    onSuccess: () => void,\r\n    onError: () => void\r\n  ) => void,\r\n  isRetrievingInteractionLog: boolean,\r\n  resetInteractionLogs: () => void,\r\n  acknowledgeInteractions: (\r\n    customerId: string,\r\n    lastAcknowledgedInteractionId: string\r\n  ) => void,\r\n  match: Match,\r\n}\r\n\r\ntype State = {\r\n  fetchCustomerError: boolean,\r\n  fetchInteractionLogError: boolean,\r\n  isConnected: boolean,\r\n}\r\n\r\nclass CustomerDetail extends React.Component<Props, State> {\r\n  state = {\r\n    fetchCustomerError: false,\r\n    fetchInteractionLogError: false,\r\n    isConnected: false,\r\n  }\r\n\r\n  componentDidMount() {\r\n    const customerId = this.props.match.params.customerId\r\n    if (customerId != null) {\r\n      this.props.retrieveCustomer(\r\n        customerId,\r\n        () => {\r\n          this.setState({ fetchCustomerError: false })\r\n        },\r\n        () => {\r\n          this.setState({ fetchCustomerError: true })\r\n        }\r\n      )\r\n\r\n      this.props.resetInteractionLogs()\r\n      this.props.retrieveInteractionLog(\r\n        customerId,\r\n        () => {\r\n          this.setState({ fetchInteractionLogError: false })\r\n        },\r\n        () => {\r\n          this.setState({ fetchInteractionLogError: true })\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    if (\r\n      !this.props.isRetrievingInteractionLog &&\r\n      prevProps.isRetrievingInteractionLog &&\r\n      this.props.interactionLog\r\n    ) {\r\n      const interactionLog = this.props.interactionLog\r\n      const interactions = interactionLog.interactions.filter(\r\n        interaction => !interaction.sentByOperator\r\n      )\r\n      if (\r\n        interactions.length > 0 &&\r\n        interactions[interactions.length - 1].id !==\r\n          interactionLog.lastAcknowledgedInteractionId\r\n      ) {\r\n        this.acknowledgeInteractions(interactions[interactions.length - 1].id)\r\n      }\r\n    }\r\n  }\r\n\r\n  acknowledgeInteractions(interactionId: string) {\r\n    const customerId = this.props.match.params.customerId\r\n    if (customerId != null) {\r\n      this.props.acknowledgeInteractions(customerId, interactionId)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { customer, interactionLog } = this.props\r\n    const { fetchCustomerError, fetchInteractionLogError } = this.state\r\n\r\n    return (\r\n      <Segment>\r\n        <Breadcrumb\r\n          style={{\r\n            fontSize: \"1.28571429rem\",\r\n            marginTop: 0,\r\n            paddingTop: 0,\r\n          }}\r\n        >\r\n          <Breadcrumb.Section link as={Link} to=\"/\">\r\n            Customers\r\n          </Breadcrumb.Section>\r\n          <Breadcrumb.Divider icon=\"right angle\" />\r\n          <Breadcrumb.Section>\r\n            {customer &&\r\n              !fetchCustomerError &&\r\n              `${customer.firstname} ${customer.lastname}`}\r\n            {!customer && !fetchCustomerError && \"Loading...\"}\r\n            {!customer && fetchCustomerError && \"Error!\"}\r\n          </Breadcrumb.Section>\r\n        </Breadcrumb>\r\n        <Button\r\n          as=\"a\"\r\n          compact\r\n          size=\"mini\"\r\n          floated=\"right\"\r\n          href={`http://localhost:3010/customers/${this.props.match.params\r\n            .customerId || \"\"}`}\r\n        >\r\n          <Icon name=\"external\" />\r\n          Open in Policy Management\r\n        </Button>\r\n\r\n        {fetchCustomerError && (\r\n          <Message\r\n            error\r\n            header=\"Error\"\r\n            content={errorMessages.customerManagementBackendNotAvailable}\r\n          />\r\n        )}\r\n        {!fetchCustomerError && customer && (\r\n          <Fragment>\r\n            <Header as=\"h4\">\r\n              Customer Profile\r\n              <Button\r\n                as={Link}\r\n                to={`/customers/${customer.customerId}/edit_profile`}\r\n                floated=\"right\"\r\n                size=\"mini\"\r\n                basic\r\n                compact\r\n              >\r\n                <Icon name=\"edit\" />\r\n                Edit Profile\r\n              </Button>\r\n            </Header>\r\n            <CustomerProfileView customer={customer} />\r\n          </Fragment>\r\n        )}\r\n\r\n        {fetchInteractionLogError && (\r\n          <Message\r\n            error\r\n            header=\"Error\"\r\n            content={errorMessages.customerManagementBackendNotAvailable}\r\n          />\r\n        )}\r\n        {!fetchCustomerError &&\r\n          !fetchInteractionLogError &&\r\n          customer &&\r\n          interactionLog && (\r\n            <Fragment>\r\n              <Header as=\"h4\">Chat</Header>\r\n              <ChatView\r\n                customer={customer}\r\n                interactionLog={interactionLog}\r\n                didReceiveMessage={message => {\r\n                  if (!message.sentByOperator && message.id != null) {\r\n                    this.acknowledgeInteractions(message.id)\r\n                  }\r\n                }}\r\n              />\r\n            </Fragment>\r\n          )}\r\n      </Segment>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  const customerId = props.match.params.customerId\r\n  return {\r\n    customer: getCustomer(state, customerId),\r\n    interactionLog: getInteractionLog(state, customerId),\r\n    isRetrievingInteractionLog: isRetrievingInteractionLog(state, props),\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  retrieveCustomer: (customerId, onSuccess, onError) =>\r\n    dispatch(\r\n      retrieveCustomer({ onSuccess, onError, urlParams: { customerId } })\r\n    ),\r\n  retrieveInteractionLog: (customerId, onSuccess, onError) =>\r\n    dispatch(\r\n      retrieveInteractionLog({ onSuccess, onError, urlParams: { customerId } })\r\n    ),\r\n  resetInteractionLogs: () => dispatch(resetInteractionLogs()),\r\n  acknowledgeInteractions: (customerId, lastAcknowledgedInteractionId) =>\r\n    dispatch(\r\n      acknowledgeInteractions({\r\n        onSuccess: () => {},\r\n        onError: () => {},\r\n        urlParams: { customerId },\r\n        body: { lastAcknowledgedInteractionId },\r\n      })\r\n    ),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(CustomerDetail)\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport { Loader, Breadcrumb, Segment } from \"semantic-ui-react\"\r\nimport { Button, Form, Message } from \"semantic-ui-react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { type Match, Link } from \"react-router-dom\"\r\nimport {\r\n  getCustomer,\r\n  retrieveCustomer,\r\n  updateCustomer,\r\n  isUpdatingCustomer,\r\n} from \"../../redux-rest-easy/customers\"\r\nimport { connect } from \"@brigad/redux-rest-easy\"\r\nimport moment from \"moment\"\r\nimport errorMessages from \"../../errorMessages\"\r\n\r\nfunction extractFormError(error, context: Map<string, string>): ?FormError {\r\n  if (error.errors != null) {\r\n    const errorFields = error.errors.map(error => error.field)\r\n    const errorMessages = error.errors.map(\r\n      error =>\r\n        `${context.get(error.field) || error.field} ${error.defaultMessage}`\r\n    )\r\n\r\n    return {\r\n      errorFields,\r\n      errorMessages,\r\n    }\r\n  } else {\r\n    return {\r\n      errorFields: [],\r\n      errorMessages: [errorMessages.customerManagementBackendNotAvailable],\r\n    }\r\n  }\r\n}\r\n\r\nexport type Props = {\r\n  customer: ?Customer,\r\n  retrieveCustomer: (\r\n    customerId: string,\r\n    onSuccess: () => void,\r\n    onError: () => void\r\n  ) => void,\r\n  updateCustomer: (\r\n    customerId: string,\r\n    updatedCustomer: {\r\n      firstname: string,\r\n      lastname: string,\r\n      city: string,\r\n      streetAddress: string,\r\n      postalCode: string,\r\n      email: string,\r\n      phoneNumber: string,\r\n      birthday: string,\r\n    },\r\n    onSuccess: () => void,\r\n    onError: () => void\r\n  ) => void,\r\n  isUpdatingCustomer: boolean,\r\n  match: Match,\r\n}\r\n\r\nconst firstnameKey = \"firstname\"\r\nconst lastnameKey = \"lastname\"\r\nconst birthdayKey = \"birthday\"\r\nconst streetAddressKey = \"streetAddress\"\r\nconst postalCodeKey = \"postalCode\"\r\nconst cityKey = \"city\"\r\nconst emailKey = \"email\"\r\nconst phoneNumberKey = \"phoneNumber\"\r\n\r\nconst context = new Map([\r\n  [firstnameKey, \"First Name\"],\r\n  [lastnameKey, \"Last Name\"],\r\n  [birthdayKey, \"Date of Birth\"],\r\n  [streetAddressKey, \"Street Address\"],\r\n  [postalCodeKey, \"Postal Code\"],\r\n  [cityKey, \"City\"],\r\n  [emailKey, \"Email Address\"],\r\n  [phoneNumberKey, \"Phone Number\"],\r\n])\r\n\r\ntype State = {\r\n  fetchCustomerError: boolean,\r\n  redirectToOverview: boolean,\r\n  firstname: string,\r\n  lastname: string,\r\n  birthday: string,\r\n  streetAddress: string,\r\n  postalCode: string,\r\n  city: string,\r\n  phoneNumber: string,\r\n  email: string,\r\n  formError: ?FormError,\r\n}\r\n\r\nclass EditCustomer extends React.Component<Props, State> {\r\n  state = {\r\n    fetchCustomerError: false,\r\n    redirectToOverview: false,\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    birthday: \"\",\r\n    streetAddress: \"\",\r\n    postalCode: \"\",\r\n    city: \"\",\r\n    phoneNumber: \"\",\r\n    email: \"\",\r\n    formError: null,\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.customer) {\r\n      this.updateFormState(this.props.customer)\r\n    } else {\r\n      const customerId = this.props.match.params.customerId\r\n      if (customerId != null) {\r\n        this.props.retrieveCustomer(\r\n          customerId,\r\n          () => {\r\n            this.setState({ fetchCustomerError: false })\r\n          },\r\n          () => {\r\n            this.setState({ fetchCustomerError: true })\r\n          }\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  updateFormState(customer: Customer) {\r\n    const {\r\n      firstname,\r\n      lastname,\r\n      birthday,\r\n      streetAddress,\r\n      postalCode,\r\n      city,\r\n      email,\r\n      phoneNumber,\r\n    } = customer\r\n\r\n    const formattedBirthday = moment(birthday).format(\"YYYY-MM-DD\")\r\n    this.setState({\r\n      firstname,\r\n      lastname,\r\n      birthday: formattedBirthday,\r\n      streetAddress,\r\n      postalCode,\r\n      city,\r\n      email,\r\n      phoneNumber,\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    if (this.props.customer && !prevProps.customer) {\r\n      this.updateFormState(this.props.customer)\r\n    }\r\n  }\r\n\r\n  handleChange = (\r\n    e: Event,\r\n    { name, value }: { name: string, value: string }\r\n  ) => {\r\n    this.setState({ [name]: value })\r\n  }\r\n\r\n  handleSubmit = async () => {\r\n    const customerId = this.props.match.params.customerId\r\n    if (customerId != null) {\r\n      const {\r\n        firstname,\r\n        lastname,\r\n        birthday,\r\n        streetAddress,\r\n        postalCode,\r\n        city,\r\n        email,\r\n        phoneNumber,\r\n      } = this.state\r\n      const updatedCustomer = {\r\n        firstname,\r\n        lastname,\r\n        birthday,\r\n        streetAddress,\r\n        postalCode,\r\n        city,\r\n        email,\r\n        phoneNumber,\r\n      }\r\n      this.props.updateCustomer(\r\n        customerId,\r\n        updatedCustomer,\r\n        () => {\r\n          this.setState({ formError: null, redirectToOverview: true })\r\n        },\r\n        error => {\r\n          if (!error) {\r\n            return\r\n          }\r\n\r\n          error.response.json().then(response => {\r\n            const formError = extractFormError(response, context)\r\n            this.setState({ formError })\r\n          })\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  renderTextField(\r\n    key: string,\r\n    value: string,\r\n    errorFields: Array<string>,\r\n    type: string = \"text\"\r\n  ) {\r\n    return (\r\n      <Form.Input\r\n        label={context.get(key)}\r\n        placeholder={context.get(key)}\r\n        type={type}\r\n        name={key}\r\n        value={value}\r\n        onChange={this.handleChange}\r\n        error={errorFields.includes(key)}\r\n      />\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { customer, isUpdatingCustomer } = this.props\r\n    const {\r\n      fetchCustomerError,\r\n      firstname,\r\n      lastname,\r\n      birthday,\r\n      streetAddress,\r\n      postalCode,\r\n      city,\r\n      email,\r\n      phoneNumber,\r\n      formError,\r\n    } = this.state\r\n\r\n    const hasError = !!formError\r\n    const errorFields = formError ? formError.errorFields : []\r\n    const errorMessages = formError ? formError.errorMessages : []\r\n\r\n    if (!customer) {\r\n      return <Loader active />\r\n    } else if (this.state.redirectToOverview) {\r\n      return <Redirect to={`/customers/${customer.customerId}`} push />\r\n    } else {\r\n      return (\r\n        <Segment>\r\n          <Breadcrumb\r\n            style={{\r\n              fontSize: \"1.28571429rem\",\r\n              marginTop: 0,\r\n              paddingTop: 0,\r\n            }}\r\n          >\r\n            <Breadcrumb.Section link as={Link} to=\"/\">\r\n              Customers\r\n            </Breadcrumb.Section>\r\n            <Breadcrumb.Divider icon=\"right angle\" />\r\n            <Breadcrumb.Section\r\n              link\r\n              as={Link}\r\n              to={`/customers/${customer ? customer.customerId : \"\"}`}\r\n            >\r\n              {customer &&\r\n                !fetchCustomerError &&\r\n                `${customer.firstname} ${customer.lastname}`}\r\n              {!customer && !fetchCustomerError && \"Loading...\"}\r\n              {!customer && fetchCustomerError && \"Error!\"}\r\n            </Breadcrumb.Section>\r\n            <Breadcrumb.Divider icon=\"right angle\" />\r\n            <Breadcrumb.Section>Edit Profile</Breadcrumb.Section>\r\n          </Breadcrumb>\r\n          <br />\r\n          <br />\r\n\r\n          <Form onSubmit={this.handleSubmit} error={hasError}>\r\n            <Form.Group widths=\"equal\">\r\n              {this.renderTextField(firstnameKey, firstname, errorFields)}\r\n              {this.renderTextField(lastnameKey, lastname, errorFields)}\r\n            </Form.Group>\r\n\r\n            {this.renderTextField(birthdayKey, birthday, errorFields, \"date\")}\r\n            {this.renderTextField(streetAddressKey, streetAddress, errorFields)}\r\n\r\n            <Form.Group widths=\"equal\">\r\n              {this.renderTextField(postalCodeKey, postalCode, errorFields)}\r\n              {this.renderTextField(cityKey, city, errorFields)}\r\n            </Form.Group>\r\n\r\n            {this.renderTextField(emailKey, email, errorFields)}\r\n            {this.renderTextField(phoneNumberKey, phoneNumber, errorFields)}\r\n\r\n            <Button\r\n              fluid\r\n              color=\"blue\"\r\n              disabled={isUpdatingCustomer}\r\n              loading={isUpdatingCustomer}\r\n            >\r\n              Save Changes\r\n            </Button>\r\n\r\n            <Message error>\r\n              <Message.Header>Update failed</Message.Header>\r\n              <Message.List items={errorMessages} />\r\n            </Message>\r\n          </Form>\r\n        </Segment>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  const customerId = props.match.params.customerId\r\n  return {\r\n    customer: getCustomer(state, customerId),\r\n    isUpdatingCustomer: isUpdatingCustomer(state, props),\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  retrieveCustomer: (customerId, onSuccess, onError) =>\r\n    dispatch(\r\n      retrieveCustomer({ onSuccess, onError, urlParams: { customerId } })\r\n    ),\r\n  updateCustomer: (customerId, updatedCustomer, onSuccess, onError) =>\r\n    dispatch(\r\n      updateCustomer({\r\n        onSuccess,\r\n        onError,\r\n        urlParams: { customerId },\r\n        body: updatedCustomer,\r\n      })\r\n    ),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(EditCustomer)\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport { Image } from \"semantic-ui-react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport logo from \"../images/logo.png\"\r\n\r\nconst styles = {\r\n  siteheader: {\r\n    display: \"inline-flex\",\r\n    marginTop: 20,\r\n    alignItems: \"center\",\r\n  },\r\n  logo: { height: 65, marginRight: 10 },\r\n  header: {\r\n    fontSize: 28,\r\n    lineHeight: \"28px\",\r\n    fontWeight: \"bold\",\r\n    color: \"#192a56\",\r\n    marginBottom: 5,\r\n  },\r\n  subheader: {\r\n    fontSize: 22,\r\n    lineHeight: \"22px\",\r\n    fontWeight: \"lighter\",\r\n    color: \"#273c75\",\r\n    margin: 0,\r\n    padding: 0,\r\n  },\r\n}\r\n\r\nexport type Props = {}\r\n\r\nexport default (props: Props) => {\r\n  return (\r\n    <Link to=\"/\">\r\n      <div style={styles.siteheader}>\r\n        <Image src={logo} style={styles.logo} />\r\n        <div>\r\n          <div style={styles.header}>Customer Management</div>\r\n          <div style={styles.subheader}>Lakeside Mutual</div>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport { Menu, Segment } from \"semantic-ui-react\"\r\nimport { Link, withRouter, type Location } from \"react-router-dom\"\r\n\r\nexport type Props = {\r\n  location: Location,\r\n}\r\n\r\nconst MenuBar = (props: Props) => {\r\n  return (\r\n    <Segment.Group style={{ marginTop: \"1em\" }}>\r\n      <Segment>\r\n        <Menu pointing secondary color=\"blue\">\r\n          <Menu.Item\r\n            name=\"Home\"\r\n            icon=\"dashboard\"\r\n            active={props.location.pathname === \"/\"}\r\n            as={Link}\r\n            to=\"/\"\r\n          />\r\n        </Menu>\r\n      </Segment>\r\n    </Segment.Group>\r\n  )\r\n}\r\n\r\nexport default withRouter(MenuBar)\r\n","// @flow\r\n\r\nimport { reducer as restEasy } from \"@brigad/redux-rest-easy\"\r\nimport { combineReducers } from \"redux\"\r\n\r\nconst reducers = combineReducers({\r\n  restEasy,\r\n})\r\n\r\nexport default reducers\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\"\r\nimport { Container } from \"semantic-ui-react\"\r\n\r\nimport Home from \"./pages/Home\"\r\nimport NewCustomer from \"./pages/NewCustomer\"\r\nimport CustomerDetail from \"./pages/CustomerDetail\"\r\nimport EditCustomer from \"./pages/EditCustomer\"\r\nimport SiteHeader from \"./components/SiteHeader\"\r\nimport MenuBar from \"./components/MenuBar\"\r\n\r\nimport { Provider } from \"react-redux\"\r\nimport configureStore from \"./redux/configureStore\"\r\nimport { customerSelfServiceBackend, customerManagementBackend } from \"./config\"\r\n\r\nconst store = configureStore()\r\n\r\nexport default class App extends React.Component<{}> {\r\n  render() {\r\n    return (\r\n      <Provider store={store}>\r\n        <BrowserRouter>\r\n          <Container text>\r\n            <SiteHeader />\r\n\r\n            <MenuBar />\r\n\r\n            <Switch>\r\n              <Route exact path=\"/\" render={props => <Home {...props} />} />\r\n              <Route\r\n                exact\r\n                path=\"/customers/new\"\r\n                render={props => <NewCustomer {...props} />}\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/customers/:customerId\"\r\n                render={props => <CustomerDetail {...props} />}\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/customers/:customerId/edit_profile\"\r\n                render={props => <EditCustomer {...props} />}\r\n              />\r\n            </Switch>\r\n            <p style={{ color: \"#0000\" }}>\r\n              REACT_APP_CUSTOMER_SELF_SERVICE_BACKEND:{\" \"}\r\n              {customerSelfServiceBackend}\r\n            </p>\r\n            <p style={{ color: \"#0000\" }}>\r\n              REACT_APP_CUSTOMER_MANAGEMENT_BACKEND: {customerManagementBackend}\r\n            </p>\r\n          </Container>\r\n        </BrowserRouter>\r\n      </Provider>\r\n    )\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport { applyMiddleware, compose, createStore } from \"redux\"\r\nimport thunkMiddleware from \"redux-thunk\"\r\n\r\nimport reducers from \"./reducers\"\r\n\r\nconst configureStore = () =>\r\n  createStore(\r\n    reducers,\r\n    {},\r\n    compose(\r\n      applyMiddleware(thunkMiddleware),\r\n      window.__REDUX_DEVTOOLS_EXTENSION__\r\n        ? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n        : f => f\r\n    )\r\n  )\r\n\r\nexport default configureStore\r\n","import React from \"react\"\r\nimport { render } from \"react-dom\"\r\nimport App from \"./App\"\r\nimport \"./index.css\"\r\nimport \"semantic-ui-css/semantic.min.css\"\r\n\r\nrender(<App />, document.getElementById(\"root\"))\r\n"],"sourceRoot":""}